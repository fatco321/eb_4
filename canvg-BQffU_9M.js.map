{"version":3,"file":"canvg-BQffU_9M.js","sources":["../node_modules/canvg/lib/index.es.js"],"sourcesContent":["import 'core-js/modules/es.promise.js';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport 'core-js/modules/es.string.match.js';\nimport 'core-js/modules/es.string.replace.js';\nimport 'core-js/modules/es.string.starts-with.js';\nimport 'core-js/modules/es.array.iterator.js';\nimport 'core-js/modules/web.dom-collections.iterator.js';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport 'core-js/modules/es.array.reduce.js';\nimport 'core-js/modules/es.string.ends-with.js';\nimport 'core-js/modules/es.string.split.js';\nimport requestAnimationFrame from 'raf';\nimport 'core-js/modules/es.string.trim.js';\nimport RGBColor from 'rgbcolor';\nimport 'core-js/modules/es.array.index-of.js';\nimport 'core-js/modules/es.string.includes.js';\nimport 'core-js/modules/es.array.reverse.js';\nimport { SVGPathData } from 'svg-pathdata';\nimport 'core-js/modules/es.regexp.to-string.js';\nimport { canvasRGBA } from 'stackblur-canvas';\n\n/**\r\n * Options preset for `OffscreenCanvas`.\r\n * @param config - Preset requirements.\r\n * @param config.DOMParser - XML/HTML parser from string into DOM Document.\r\n * @returns Preset object.\r\n */\nfunction offscreen() {\n  var {\n    DOMParser: DOMParserFallback\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var preset = {\n    window: null,\n    ignoreAnimation: true,\n    ignoreMouse: true,\n    DOMParser: DOMParserFallback,\n\n    createCanvas(width, height) {\n      return new OffscreenCanvas(width, height);\n    },\n\n    createImage(url) {\n      return _asyncToGenerator(function* () {\n        var response = yield fetch(url);\n        var blob = yield response.blob();\n        var img = yield createImageBitmap(blob);\n        return img;\n      })();\n    }\n\n  };\n\n  if (typeof DOMParser !== 'undefined' || typeof DOMParserFallback === 'undefined') {\n    Reflect.deleteProperty(preset, 'DOMParser');\n  }\n\n  return preset;\n}\n\n/**\r\n * Options preset for `node-canvas`.\r\n * @param config - Preset requirements.\r\n * @param config.DOMParser - XML/HTML parser from string into DOM Document.\r\n * @param config.canvas - `node-canvas` exports.\r\n * @param config.fetch - WHATWG-compatible `fetch` function.\r\n * @returns Preset object.\r\n */\nfunction node(_ref) {\n  var {\n    DOMParser,\n    canvas,\n    fetch\n  } = _ref;\n  return {\n    window: null,\n    ignoreAnimation: true,\n    ignoreMouse: true,\n    DOMParser,\n    fetch,\n    createCanvas: canvas.createCanvas,\n    createImage: canvas.loadImage\n  };\n}\n\nvar index = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\toffscreen: offscreen,\n\tnode: node\n});\n\n/**\r\n * HTML-safe compress white-spaces.\r\n * @param str - String to compress.\r\n * @returns String.\r\n */\nfunction compressSpaces(str) {\n  return str.replace(/(?!\\u3000)\\s+/gm, ' ');\n}\n/**\r\n * HTML-safe left trim.\r\n * @param str - String to trim.\r\n * @returns String.\r\n */\n\nfunction trimLeft(str) {\n  return str.replace(/^[\\n \\t]+/, '');\n}\n/**\r\n * HTML-safe right trim.\r\n * @param str - String to trim.\r\n * @returns String.\r\n */\n\nfunction trimRight(str) {\n  return str.replace(/[\\n \\t]+$/, '');\n}\n/**\r\n * String to numbers array.\r\n * @param str - Numbers string.\r\n * @returns Numbers array.\r\n */\n\nfunction toNumbers(str) {\n  var matches = (str || '').match(/-?(\\d+(?:\\.\\d*(?:[eE][+-]?\\d+)?)?|\\.\\d+)(?=\\D|$)/gm) || [];\n  return matches.map(parseFloat);\n} // Microsoft Edge fix\n\nvar allUppercase = /^[A-Z-]+$/;\n/**\r\n * Normalize attribute name.\r\n * @param name - Attribute name.\r\n * @returns Normalized attribute name.\r\n */\n\nfunction normalizeAttributeName(name) {\n  if (allUppercase.test(name)) {\n    return name.toLowerCase();\n  }\n\n  return name;\n}\n/**\r\n * Parse external URL.\r\n * @param url - CSS url string.\r\n * @returns Parsed URL.\r\n */\n\nfunction parseExternalUrl(url) {\n  //                      single quotes [2]\n  //                      v         double quotes [3]\n  //                      v         v         no quotes [4]\n  //                      v         v         v\n  var urlMatch = /url\\(('([^']+)'|\"([^\"]+)\"|([^'\")]+))\\)/.exec(url) || [];\n  return urlMatch[2] || urlMatch[3] || urlMatch[4];\n}\n/**\r\n * Transform floats to integers in rgb colors.\r\n * @param color - Color to normalize.\r\n * @returns Normalized color.\r\n */\n\nfunction normalizeColor(color) {\n  if (!color.startsWith('rgb')) {\n    return color;\n  }\n\n  var rgbParts = 3;\n  var normalizedColor = color.replace(/\\d+(\\.\\d+)?/g, (num, isFloat) => rgbParts-- && isFloat ? String(Math.round(parseFloat(num))) : num);\n  return normalizedColor;\n}\n\n// slightly modified version of https://github.com/keeganstreet/specificity/blob/master/specificity.js\nvar attributeRegex = /(\\[[^\\]]+\\])/g;\nvar idRegex = /(#[^\\s+>~.[:]+)/g;\nvar classRegex = /(\\.[^\\s+>~.[:]+)/g;\nvar pseudoElementRegex = /(::[^\\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi;\nvar pseudoClassWithBracketsRegex = /(:[\\w-]+\\([^)]*\\))/gi;\nvar pseudoClassRegex = /(:[^\\s+>~.[:]+)/g;\nvar elementRegex = /([^\\s+>~.[:]+)/g;\n\nfunction findSelectorMatch(selector, regex) {\n  var matches = regex.exec(selector);\n\n  if (!matches) {\n    return [selector, 0];\n  }\n\n  return [selector.replace(regex, ' '), matches.length];\n}\n/**\r\n * Measure selector specificity.\r\n * @param selector - Selector to measure.\r\n * @returns Specificity.\r\n */\n\n\nfunction getSelectorSpecificity(selector) {\n  var specificity = [0, 0, 0];\n  var currentSelector = selector.replace(/:not\\(([^)]*)\\)/g, '     $1 ').replace(/{[\\s\\S]*/gm, ' ');\n  var delta = 0;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, attributeRegex);\n  specificity[1] += delta;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, idRegex);\n  specificity[0] += delta;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, classRegex);\n  specificity[1] += delta;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoElementRegex);\n  specificity[2] += delta;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoClassWithBracketsRegex);\n  specificity[1] += delta;\n  [currentSelector, delta] = findSelectorMatch(currentSelector, pseudoClassRegex);\n  specificity[1] += delta;\n  currentSelector = currentSelector.replace(/[*\\s+>~]/g, ' ').replace(/[#.]/g, ' ');\n  [currentSelector, delta] = findSelectorMatch(currentSelector, elementRegex); // lgtm [js/useless-assignment-to-local]\n\n  specificity[2] += delta;\n  return specificity.join('');\n}\n\nvar PSEUDO_ZERO = .00000001;\n/**\r\n * Vector magnitude.\r\n * @param v\r\n * @returns Number result.\r\n */\n\nfunction vectorMagnitude(v) {\n  return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2));\n}\n/**\r\n * Ratio between two vectors.\r\n * @param u\r\n * @param v\r\n * @returns Number result.\r\n */\n\nfunction vectorsRatio(u, v) {\n  return (u[0] * v[0] + u[1] * v[1]) / (vectorMagnitude(u) * vectorMagnitude(v));\n}\n/**\r\n * Angle between two vectors.\r\n * @param u\r\n * @param v\r\n * @returns Number result.\r\n */\n\nfunction vectorsAngle(u, v) {\n  return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vectorsRatio(u, v));\n}\nfunction CB1(t) {\n  return t * t * t;\n}\nfunction CB2(t) {\n  return 3 * t * t * (1 - t);\n}\nfunction CB3(t) {\n  return 3 * t * (1 - t) * (1 - t);\n}\nfunction CB4(t) {\n  return (1 - t) * (1 - t) * (1 - t);\n}\nfunction QB1(t) {\n  return t * t;\n}\nfunction QB2(t) {\n  return 2 * t * (1 - t);\n}\nfunction QB3(t) {\n  return (1 - t) * (1 - t);\n}\n\nclass Property {\n  constructor(document, name, value) {\n    this.document = document;\n    this.name = name;\n    this.value = value;\n    this.isNormalizedColor = false;\n  }\n\n  static empty(document) {\n    return new Property(document, 'EMPTY', '');\n  }\n\n  split() {\n    var separator = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ' ';\n    var {\n      document,\n      name\n    } = this;\n    return compressSpaces(this.getString()).trim().split(separator).map(value => new Property(document, name, value));\n  }\n\n  hasValue(zeroIsValue) {\n    var {\n      value\n    } = this;\n    return value !== null && value !== '' && (zeroIsValue || value !== 0) && typeof value !== 'undefined';\n  }\n\n  isString(regexp) {\n    var {\n      value\n    } = this;\n    var result = typeof value === 'string';\n\n    if (!result || !regexp) {\n      return result;\n    }\n\n    return regexp.test(value);\n  }\n\n  isUrlDefinition() {\n    return this.isString(/^url\\(/);\n  }\n\n  isPixels() {\n    if (!this.hasValue()) {\n      return false;\n    }\n\n    var asString = this.getString();\n\n    switch (true) {\n      case asString.endsWith('px'):\n      case /^[0-9]+$/.test(asString):\n        return true;\n\n      default:\n        return false;\n    }\n  }\n\n  setValue(value) {\n    this.value = value;\n    return this;\n  }\n\n  getValue(def) {\n    if (typeof def === 'undefined' || this.hasValue()) {\n      return this.value;\n    }\n\n    return def;\n  }\n\n  getNumber(def) {\n    if (!this.hasValue()) {\n      if (typeof def === 'undefined') {\n        return 0;\n      }\n\n      return parseFloat(def);\n    }\n\n    var {\n      value\n    } = this;\n    var n = parseFloat(value);\n\n    if (this.isString(/%$/)) {\n      n /= 100.0;\n    }\n\n    return n;\n  }\n\n  getString(def) {\n    if (typeof def === 'undefined' || this.hasValue()) {\n      return typeof this.value === 'undefined' ? '' : String(this.value);\n    }\n\n    return String(def);\n  }\n\n  getColor(def) {\n    var color = this.getString(def);\n\n    if (this.isNormalizedColor) {\n      return color;\n    }\n\n    this.isNormalizedColor = true;\n    color = normalizeColor(color);\n    this.value = color;\n    return color;\n  }\n\n  getDpi() {\n    return 96.0; // TODO: compute?\n  }\n\n  getRem() {\n    return this.document.rootEmSize;\n  }\n\n  getEm() {\n    return this.document.emSize;\n  }\n\n  getUnits() {\n    return this.getString().replace(/[0-9.-]/g, '');\n  }\n\n  getPixels(axisOrIsFontSize) {\n    var processPercent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    if (!this.hasValue()) {\n      return 0;\n    }\n\n    var [axis, isFontSize] = typeof axisOrIsFontSize === 'boolean' ? [undefined, axisOrIsFontSize] : [axisOrIsFontSize];\n    var {\n      viewPort\n    } = this.document.screen;\n\n    switch (true) {\n      case this.isString(/vmin$/):\n        return this.getNumber() / 100.0 * Math.min(viewPort.computeSize('x'), viewPort.computeSize('y'));\n\n      case this.isString(/vmax$/):\n        return this.getNumber() / 100.0 * Math.max(viewPort.computeSize('x'), viewPort.computeSize('y'));\n\n      case this.isString(/vw$/):\n        return this.getNumber() / 100.0 * viewPort.computeSize('x');\n\n      case this.isString(/vh$/):\n        return this.getNumber() / 100.0 * viewPort.computeSize('y');\n\n      case this.isString(/rem$/):\n        return this.getNumber() * this.getRem();\n\n      case this.isString(/em$/):\n        return this.getNumber() * this.getEm();\n\n      case this.isString(/ex$/):\n        return this.getNumber() * this.getEm() / 2.0;\n\n      case this.isString(/px$/):\n        return this.getNumber();\n\n      case this.isString(/pt$/):\n        return this.getNumber() * this.getDpi() * (1.0 / 72.0);\n\n      case this.isString(/pc$/):\n        return this.getNumber() * 15;\n\n      case this.isString(/cm$/):\n        return this.getNumber() * this.getDpi() / 2.54;\n\n      case this.isString(/mm$/):\n        return this.getNumber() * this.getDpi() / 25.4;\n\n      case this.isString(/in$/):\n        return this.getNumber() * this.getDpi();\n\n      case this.isString(/%$/) && isFontSize:\n        return this.getNumber() * this.getEm();\n\n      case this.isString(/%$/):\n        return this.getNumber() * viewPort.computeSize(axis);\n\n      default:\n        {\n          var n = this.getNumber();\n\n          if (processPercent && n < 1.0) {\n            return n * viewPort.computeSize(axis);\n          }\n\n          return n;\n        }\n    }\n  }\n\n  getMilliseconds() {\n    if (!this.hasValue()) {\n      return 0;\n    }\n\n    if (this.isString(/ms$/)) {\n      return this.getNumber();\n    }\n\n    return this.getNumber() * 1000;\n  }\n\n  getRadians() {\n    if (!this.hasValue()) {\n      return 0;\n    }\n\n    switch (true) {\n      case this.isString(/deg$/):\n        return this.getNumber() * (Math.PI / 180.0);\n\n      case this.isString(/grad$/):\n        return this.getNumber() * (Math.PI / 200.0);\n\n      case this.isString(/rad$/):\n        return this.getNumber();\n\n      default:\n        return this.getNumber() * (Math.PI / 180.0);\n    }\n  }\n\n  getDefinition() {\n    var asString = this.getString();\n    var name = /#([^)'\"]+)/.exec(asString);\n\n    if (name) {\n      name = name[1];\n    }\n\n    if (!name) {\n      name = asString;\n    }\n\n    return this.document.definitions[name];\n  }\n\n  getFillStyleDefinition(element, opacity) {\n    var def = this.getDefinition();\n\n    if (!def) {\n      return null;\n    } // gradient\n\n\n    if (typeof def.createGradient === 'function') {\n      return def.createGradient(this.document.ctx, element, opacity);\n    } // pattern\n\n\n    if (typeof def.createPattern === 'function') {\n      if (def.getHrefAttribute().hasValue()) {\n        var patternTransform = def.getAttribute('patternTransform');\n        def = def.getHrefAttribute().getDefinition();\n\n        if (patternTransform.hasValue()) {\n          def.getAttribute('patternTransform', true).setValue(patternTransform.value);\n        }\n      }\n\n      return def.createPattern(this.document.ctx, element, opacity);\n    }\n\n    return null;\n  }\n\n  getTextBaseline() {\n    if (!this.hasValue()) {\n      return null;\n    }\n\n    return Property.textBaselineMapping[this.getString()];\n  }\n\n  addOpacity(opacity) {\n    var value = this.getColor();\n    var len = value.length;\n    var commas = 0; // Simulate old RGBColor version, which can't parse rgba.\n\n    for (var i = 0; i < len; i++) {\n      if (value[i] === ',') {\n        commas++;\n      }\n\n      if (commas === 3) {\n        break;\n      }\n    }\n\n    if (opacity.hasValue() && this.isString() && commas !== 3) {\n      var color = new RGBColor(value);\n\n      if (color.ok) {\n        color.alpha = opacity.getNumber();\n        value = color.toRGBA();\n      }\n    }\n\n    return new Property(this.document, this.name, value);\n  }\n\n}\nProperty.textBaselineMapping = {\n  'baseline': 'alphabetic',\n  'before-edge': 'top',\n  'text-before-edge': 'top',\n  'middle': 'middle',\n  'central': 'middle',\n  'after-edge': 'bottom',\n  'text-after-edge': 'bottom',\n  'ideographic': 'ideographic',\n  'alphabetic': 'alphabetic',\n  'hanging': 'hanging',\n  'mathematical': 'alphabetic'\n};\n\nclass ViewPort {\n  constructor() {\n    this.viewPorts = [];\n  }\n\n  clear() {\n    this.viewPorts = [];\n  }\n\n  setCurrent(width, height) {\n    this.viewPorts.push({\n      width,\n      height\n    });\n  }\n\n  removeCurrent() {\n    this.viewPorts.pop();\n  }\n\n  getCurrent() {\n    var {\n      viewPorts\n    } = this;\n    return viewPorts[viewPorts.length - 1];\n  }\n\n  get width() {\n    return this.getCurrent().width;\n  }\n\n  get height() {\n    return this.getCurrent().height;\n  }\n\n  computeSize(d) {\n    if (typeof d === 'number') {\n      return d;\n    }\n\n    if (d === 'x') {\n      return this.width;\n    }\n\n    if (d === 'y') {\n      return this.height;\n    }\n\n    return Math.sqrt(Math.pow(this.width, 2) + Math.pow(this.height, 2)) / Math.sqrt(2);\n  }\n\n}\n\nclass Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  static parse(point) {\n    var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var [x = defaultValue, y = defaultValue] = toNumbers(point);\n    return new Point(x, y);\n  }\n\n  static parseScale(scale) {\n    var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var [x = defaultValue, y = x] = toNumbers(scale);\n    return new Point(x, y);\n  }\n\n  static parsePath(path) {\n    var points = toNumbers(path);\n    var len = points.length;\n    var pathPoints = [];\n\n    for (var i = 0; i < len; i += 2) {\n      pathPoints.push(new Point(points[i], points[i + 1]));\n    }\n\n    return pathPoints;\n  }\n\n  angleTo(point) {\n    return Math.atan2(point.y - this.y, point.x - this.x);\n  }\n\n  applyTransform(transform) {\n    var {\n      x,\n      y\n    } = this;\n    var xp = x * transform[0] + y * transform[2] + transform[4];\n    var yp = x * transform[1] + y * transform[3] + transform[5];\n    this.x = xp;\n    this.y = yp;\n  }\n\n}\n\nclass Mouse {\n  constructor(screen) {\n    this.screen = screen;\n    this.working = false;\n    this.events = [];\n    this.eventElements = []; // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\n    this.onClick = this.onClick.bind(this); // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\n    this.onMouseMove = this.onMouseMove.bind(this);\n  }\n\n  isWorking() {\n    return this.working;\n  }\n\n  start() {\n    if (this.working) {\n      return;\n    }\n\n    var {\n      screen,\n      onClick,\n      onMouseMove\n    } = this;\n    var canvas = screen.ctx.canvas;\n    canvas.onclick = onClick;\n    canvas.onmousemove = onMouseMove;\n    this.working = true;\n  }\n\n  stop() {\n    if (!this.working) {\n      return;\n    }\n\n    var canvas = this.screen.ctx.canvas;\n    this.working = false;\n    canvas.onclick = null;\n    canvas.onmousemove = null;\n  }\n\n  hasEvents() {\n    return this.working && this.events.length > 0;\n  }\n\n  runEvents() {\n    if (!this.working) {\n      return;\n    }\n\n    var {\n      screen: document,\n      events,\n      eventElements\n    } = this;\n    var {\n      style\n    } = document.ctx.canvas;\n\n    if (style) {\n      style.cursor = '';\n    }\n\n    events.forEach((_ref, i) => {\n      var {\n        run\n      } = _ref;\n      var element = eventElements[i];\n\n      while (element) {\n        run(element);\n        element = element.parent;\n      }\n    }); // done running, clear\n\n    this.events = [];\n    this.eventElements = [];\n  }\n\n  checkPath(element, ctx) {\n    if (!this.working || !ctx) {\n      return;\n    }\n\n    var {\n      events,\n      eventElements\n    } = this;\n    events.forEach((_ref2, i) => {\n      var {\n        x,\n        y\n      } = _ref2;\n\n      if (!eventElements[i] && ctx.isPointInPath && ctx.isPointInPath(x, y)) {\n        eventElements[i] = element;\n      }\n    });\n  }\n\n  checkBoundingBox(element, boundingBox) {\n    if (!this.working || !boundingBox) {\n      return;\n    }\n\n    var {\n      events,\n      eventElements\n    } = this;\n    events.forEach((_ref3, i) => {\n      var {\n        x,\n        y\n      } = _ref3;\n\n      if (!eventElements[i] && boundingBox.isPointInBox(x, y)) {\n        eventElements[i] = element;\n      }\n    });\n  }\n\n  mapXY(x, y) {\n    var {\n      window,\n      ctx\n    } = this.screen;\n    var point = new Point(x, y);\n    var element = ctx.canvas;\n\n    while (element) {\n      point.x -= element.offsetLeft;\n      point.y -= element.offsetTop;\n      element = element.offsetParent;\n    }\n\n    if (window.scrollX) {\n      point.x += window.scrollX;\n    }\n\n    if (window.scrollY) {\n      point.y += window.scrollY;\n    }\n\n    return point;\n  }\n\n  onClick(event) {\n    var {\n      x,\n      y\n    } = this.mapXY(event.clientX, event.clientY);\n    this.events.push({\n      type: 'onclick',\n      x,\n      y,\n\n      run(eventTarget) {\n        if (eventTarget.onClick) {\n          eventTarget.onClick();\n        }\n      }\n\n    });\n  }\n\n  onMouseMove(event) {\n    var {\n      x,\n      y\n    } = this.mapXY(event.clientX, event.clientY);\n    this.events.push({\n      type: 'onmousemove',\n      x,\n      y,\n\n      run(eventTarget) {\n        if (eventTarget.onMouseMove) {\n          eventTarget.onMouseMove();\n        }\n      }\n\n    });\n  }\n\n}\n\nvar defaultWindow = typeof window !== 'undefined' ? window : null;\nvar defaultFetch$1 = typeof fetch !== 'undefined' ? fetch.bind(undefined) // `fetch` depends on context: `someObject.fetch(...)` will throw error.\n: null;\nclass Screen {\n  constructor(ctx) {\n    var {\n      fetch = defaultFetch$1,\n      window = defaultWindow\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.ctx = ctx;\n    this.FRAMERATE = 30;\n    this.MAX_VIRTUAL_PIXELS = 30000;\n    this.CLIENT_WIDTH = 800;\n    this.CLIENT_HEIGHT = 600;\n    this.viewPort = new ViewPort();\n    this.mouse = new Mouse(this);\n    this.animations = [];\n    this.waits = [];\n    this.frameDuration = 0;\n    this.isReadyLock = false;\n    this.isFirstRender = true;\n    this.intervalId = null;\n    this.window = window;\n    this.fetch = fetch;\n  }\n\n  wait(checker) {\n    this.waits.push(checker);\n  }\n\n  ready() {\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    if (!this.readyPromise) {\n      return Promise.resolve();\n    }\n\n    return this.readyPromise;\n  }\n\n  isReady() {\n    if (this.isReadyLock) {\n      return true;\n    }\n\n    var isReadyLock = this.waits.every(_ => _());\n\n    if (isReadyLock) {\n      this.waits = [];\n\n      if (this.resolveReady) {\n        this.resolveReady();\n      }\n    }\n\n    this.isReadyLock = isReadyLock;\n    return isReadyLock;\n  }\n\n  setDefaults(ctx) {\n    // initial values and defaults\n    ctx.strokeStyle = 'rgba(0,0,0,0)';\n    ctx.lineCap = 'butt';\n    ctx.lineJoin = 'miter';\n    ctx.miterLimit = 4;\n  }\n\n  setViewBox(_ref) {\n    var {\n      document,\n      ctx,\n      aspectRatio,\n      width,\n      desiredWidth,\n      height,\n      desiredHeight,\n      minX = 0,\n      minY = 0,\n      refX,\n      refY,\n      clip = false,\n      clipX = 0,\n      clipY = 0\n    } = _ref;\n    // aspect ratio - http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute\n    var cleanAspectRatio = compressSpaces(aspectRatio).replace(/^defer\\s/, ''); // ignore defer\n\n    var [aspectRatioAlign, aspectRatioMeetOrSlice] = cleanAspectRatio.split(' ');\n    var align = aspectRatioAlign || 'xMidYMid';\n    var meetOrSlice = aspectRatioMeetOrSlice || 'meet'; // calculate scale\n\n    var scaleX = width / desiredWidth;\n    var scaleY = height / desiredHeight;\n    var scaleMin = Math.min(scaleX, scaleY);\n    var scaleMax = Math.max(scaleX, scaleY);\n    var finalDesiredWidth = desiredWidth;\n    var finalDesiredHeight = desiredHeight;\n\n    if (meetOrSlice === 'meet') {\n      finalDesiredWidth *= scaleMin;\n      finalDesiredHeight *= scaleMin;\n    }\n\n    if (meetOrSlice === 'slice') {\n      finalDesiredWidth *= scaleMax;\n      finalDesiredHeight *= scaleMax;\n    }\n\n    var refXProp = new Property(document, 'refX', refX);\n    var refYProp = new Property(document, 'refY', refY);\n    var hasRefs = refXProp.hasValue() && refYProp.hasValue();\n\n    if (hasRefs) {\n      ctx.translate(-scaleMin * refXProp.getPixels('x'), -scaleMin * refYProp.getPixels('y'));\n    }\n\n    if (clip) {\n      var scaledClipX = scaleMin * clipX;\n      var scaledClipY = scaleMin * clipY;\n      ctx.beginPath();\n      ctx.moveTo(scaledClipX, scaledClipY);\n      ctx.lineTo(width, scaledClipY);\n      ctx.lineTo(width, height);\n      ctx.lineTo(scaledClipX, height);\n      ctx.closePath();\n      ctx.clip();\n    }\n\n    if (!hasRefs) {\n      var isMeetMinY = meetOrSlice === 'meet' && scaleMin === scaleY;\n      var isSliceMaxY = meetOrSlice === 'slice' && scaleMax === scaleY;\n      var isMeetMinX = meetOrSlice === 'meet' && scaleMin === scaleX;\n      var isSliceMaxX = meetOrSlice === 'slice' && scaleMax === scaleX;\n\n      if (align.startsWith('xMid') && (isMeetMinY || isSliceMaxY)) {\n        ctx.translate(width / 2.0 - finalDesiredWidth / 2.0, 0);\n      }\n\n      if (align.endsWith('YMid') && (isMeetMinX || isSliceMaxX)) {\n        ctx.translate(0, height / 2.0 - finalDesiredHeight / 2.0);\n      }\n\n      if (align.startsWith('xMax') && (isMeetMinY || isSliceMaxY)) {\n        ctx.translate(width - finalDesiredWidth, 0);\n      }\n\n      if (align.endsWith('YMax') && (isMeetMinX || isSliceMaxX)) {\n        ctx.translate(0, height - finalDesiredHeight);\n      }\n    } // scale\n\n\n    switch (true) {\n      case align === 'none':\n        ctx.scale(scaleX, scaleY);\n        break;\n\n      case meetOrSlice === 'meet':\n        ctx.scale(scaleMin, scaleMin);\n        break;\n\n      case meetOrSlice === 'slice':\n        ctx.scale(scaleMax, scaleMax);\n        break;\n    } // translate\n\n\n    ctx.translate(-minX, -minY);\n  }\n\n  start(element) {\n    var {\n      enableRedraw = false,\n      ignoreMouse = false,\n      ignoreAnimation = false,\n      ignoreDimensions = false,\n      ignoreClear = false,\n      forceRedraw,\n      scaleWidth,\n      scaleHeight,\n      offsetX,\n      offsetY\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      FRAMERATE,\n      mouse\n    } = this;\n    var frameDuration = 1000 / FRAMERATE;\n    this.frameDuration = frameDuration;\n    this.readyPromise = new Promise(resolve => {\n      this.resolveReady = resolve;\n    });\n\n    if (this.isReady()) {\n      this.render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY);\n    }\n\n    if (!enableRedraw) {\n      return;\n    }\n\n    var now = Date.now();\n    var then = now;\n    var delta = 0;\n\n    var tick = () => {\n      now = Date.now();\n      delta = now - then;\n\n      if (delta >= frameDuration) {\n        then = now - delta % frameDuration;\n\n        if (this.shouldUpdate(ignoreAnimation, forceRedraw)) {\n          this.render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY);\n          mouse.runEvents();\n        }\n      }\n\n      this.intervalId = requestAnimationFrame(tick);\n    };\n\n    if (!ignoreMouse) {\n      mouse.start();\n    }\n\n    this.intervalId = requestAnimationFrame(tick);\n  }\n\n  stop() {\n    if (this.intervalId) {\n      requestAnimationFrame.cancel(this.intervalId);\n      this.intervalId = null;\n    }\n\n    this.mouse.stop();\n  }\n\n  shouldUpdate(ignoreAnimation, forceRedraw) {\n    // need update from animations?\n    if (!ignoreAnimation) {\n      var {\n        frameDuration\n      } = this;\n      var shouldUpdate = this.animations.reduce((shouldUpdate, animation) => animation.update(frameDuration) || shouldUpdate, false);\n\n      if (shouldUpdate) {\n        return true;\n      }\n    } // need update from redraw?\n\n\n    if (typeof forceRedraw === 'function' && forceRedraw()) {\n      return true;\n    }\n\n    if (!this.isReadyLock && this.isReady()) {\n      return true;\n    } // need update from mouse events?\n\n\n    if (this.mouse.hasEvents()) {\n      return true;\n    }\n\n    return false;\n  }\n\n  render(element, ignoreDimensions, ignoreClear, scaleWidth, scaleHeight, offsetX, offsetY) {\n    var {\n      CLIENT_WIDTH,\n      CLIENT_HEIGHT,\n      viewPort,\n      ctx,\n      isFirstRender\n    } = this;\n    var canvas = ctx.canvas;\n    viewPort.clear();\n\n    if (canvas.width && canvas.height) {\n      viewPort.setCurrent(canvas.width, canvas.height);\n    } else {\n      viewPort.setCurrent(CLIENT_WIDTH, CLIENT_HEIGHT);\n    }\n\n    var widthStyle = element.getStyle('width');\n    var heightStyle = element.getStyle('height');\n\n    if (!ignoreDimensions && (isFirstRender || typeof scaleWidth !== 'number' && typeof scaleHeight !== 'number')) {\n      // set canvas size\n      if (widthStyle.hasValue()) {\n        canvas.width = widthStyle.getPixels('x');\n\n        if (canvas.style) {\n          canvas.style.width = \"\".concat(canvas.width, \"px\");\n        }\n      }\n\n      if (heightStyle.hasValue()) {\n        canvas.height = heightStyle.getPixels('y');\n\n        if (canvas.style) {\n          canvas.style.height = \"\".concat(canvas.height, \"px\");\n        }\n      }\n    }\n\n    var cWidth = canvas.clientWidth || canvas.width;\n    var cHeight = canvas.clientHeight || canvas.height;\n\n    if (ignoreDimensions && widthStyle.hasValue() && heightStyle.hasValue()) {\n      cWidth = widthStyle.getPixels('x');\n      cHeight = heightStyle.getPixels('y');\n    }\n\n    viewPort.setCurrent(cWidth, cHeight);\n\n    if (typeof offsetX === 'number') {\n      element.getAttribute('x', true).setValue(offsetX);\n    }\n\n    if (typeof offsetY === 'number') {\n      element.getAttribute('y', true).setValue(offsetY);\n    }\n\n    if (typeof scaleWidth === 'number' || typeof scaleHeight === 'number') {\n      var viewBox = toNumbers(element.getAttribute('viewBox').getString());\n      var xRatio = 0;\n      var yRatio = 0;\n\n      if (typeof scaleWidth === 'number') {\n        var _widthStyle = element.getStyle('width');\n\n        if (_widthStyle.hasValue()) {\n          xRatio = _widthStyle.getPixels('x') / scaleWidth;\n        } else if (!isNaN(viewBox[2])) {\n          xRatio = viewBox[2] / scaleWidth;\n        }\n      }\n\n      if (typeof scaleHeight === 'number') {\n        var _heightStyle = element.getStyle('height');\n\n        if (_heightStyle.hasValue()) {\n          yRatio = _heightStyle.getPixels('y') / scaleHeight;\n        } else if (!isNaN(viewBox[3])) {\n          yRatio = viewBox[3] / scaleHeight;\n        }\n      }\n\n      if (!xRatio) {\n        xRatio = yRatio;\n      }\n\n      if (!yRatio) {\n        yRatio = xRatio;\n      }\n\n      element.getAttribute('width', true).setValue(scaleWidth);\n      element.getAttribute('height', true).setValue(scaleHeight);\n      var transformStyle = element.getStyle('transform', true, true);\n      transformStyle.setValue(\"\".concat(transformStyle.getString(), \" scale(\").concat(1.0 / xRatio, \", \").concat(1.0 / yRatio, \")\"));\n    } // clear and render\n\n\n    if (!ignoreClear) {\n      ctx.clearRect(0, 0, cWidth, cHeight);\n    }\n\n    element.render(ctx);\n\n    if (isFirstRender) {\n      this.isFirstRender = false;\n    }\n  }\n\n}\nScreen.defaultWindow = defaultWindow;\nScreen.defaultFetch = defaultFetch$1;\n\nvar {\n  defaultFetch\n} = Screen;\nvar DefaultDOMParser = typeof DOMParser !== 'undefined' ? DOMParser : null;\nclass Parser {\n  constructor() {\n    var {\n      fetch = defaultFetch,\n      DOMParser = DefaultDOMParser\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.fetch = fetch;\n    this.DOMParser = DOMParser;\n  }\n\n  parse(resource) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (resource.startsWith('<')) {\n        return _this.parseFromString(resource);\n      }\n\n      return _this.load(resource);\n    })();\n  }\n\n  parseFromString(xml) {\n    var parser = new this.DOMParser();\n\n    try {\n      return this.checkDocument(parser.parseFromString(xml, 'image/svg+xml'));\n    } catch (err) {\n      return this.checkDocument(parser.parseFromString(xml, 'text/xml'));\n    }\n  }\n\n  checkDocument(document) {\n    var parserError = document.getElementsByTagName('parsererror')[0];\n\n    if (parserError) {\n      throw new Error(parserError.textContent);\n    }\n\n    return document;\n  }\n\n  load(url) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var response = yield _this2.fetch(url);\n      var xml = yield response.text();\n      return _this2.parseFromString(xml);\n    })();\n  }\n\n}\n\nclass Translate {\n  constructor(_, point) {\n    this.type = 'translate';\n    this.point = null;\n    this.point = Point.parse(point);\n  }\n\n  apply(ctx) {\n    var {\n      x,\n      y\n    } = this.point;\n    ctx.translate(x || 0.0, y || 0.0);\n  }\n\n  unapply(ctx) {\n    var {\n      x,\n      y\n    } = this.point;\n    ctx.translate(-1.0 * x || 0.0, -1.0 * y || 0.0);\n  }\n\n  applyToPoint(point) {\n    var {\n      x,\n      y\n    } = this.point;\n    point.applyTransform([1, 0, 0, 1, x || 0.0, y || 0.0]);\n  }\n\n}\n\nclass Rotate {\n  constructor(document, rotate, transformOrigin) {\n    this.type = 'rotate';\n    this.angle = null;\n    this.originX = null;\n    this.originY = null;\n    this.cx = 0;\n    this.cy = 0;\n    var numbers = toNumbers(rotate);\n    this.angle = new Property(document, 'angle', numbers[0]);\n    this.originX = transformOrigin[0];\n    this.originY = transformOrigin[1];\n    this.cx = numbers[1] || 0;\n    this.cy = numbers[2] || 0;\n  }\n\n  apply(ctx) {\n    var {\n      cx,\n      cy,\n      originX,\n      originY,\n      angle\n    } = this;\n    var tx = cx + originX.getPixels('x');\n    var ty = cy + originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.rotate(angle.getRadians());\n    ctx.translate(-tx, -ty);\n  }\n\n  unapply(ctx) {\n    var {\n      cx,\n      cy,\n      originX,\n      originY,\n      angle\n    } = this;\n    var tx = cx + originX.getPixels('x');\n    var ty = cy + originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.rotate(-1.0 * angle.getRadians());\n    ctx.translate(-tx, -ty);\n  }\n\n  applyToPoint(point) {\n    var {\n      cx,\n      cy,\n      angle\n    } = this;\n    var rad = angle.getRadians();\n    point.applyTransform([1, 0, 0, 1, cx || 0.0, cy || 0.0 // this.p.y\n    ]);\n    point.applyTransform([Math.cos(rad), Math.sin(rad), -Math.sin(rad), Math.cos(rad), 0, 0]);\n    point.applyTransform([1, 0, 0, 1, -cx || 0.0, -cy || 0.0 // -this.p.y\n    ]);\n  }\n\n}\n\nclass Scale {\n  constructor(_, scale, transformOrigin) {\n    this.type = 'scale';\n    this.scale = null;\n    this.originX = null;\n    this.originY = null;\n    var scaleSize = Point.parseScale(scale); // Workaround for node-canvas\n\n    if (scaleSize.x === 0 || scaleSize.y === 0) {\n      scaleSize.x = PSEUDO_ZERO;\n      scaleSize.y = PSEUDO_ZERO;\n    }\n\n    this.scale = scaleSize;\n    this.originX = transformOrigin[0];\n    this.originY = transformOrigin[1];\n  }\n\n  apply(ctx) {\n    var {\n      scale: {\n        x,\n        y\n      },\n      originX,\n      originY\n    } = this;\n    var tx = originX.getPixels('x');\n    var ty = originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.scale(x, y || x);\n    ctx.translate(-tx, -ty);\n  }\n\n  unapply(ctx) {\n    var {\n      scale: {\n        x,\n        y\n      },\n      originX,\n      originY\n    } = this;\n    var tx = originX.getPixels('x');\n    var ty = originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.scale(1.0 / x, 1.0 / y || x);\n    ctx.translate(-tx, -ty);\n  }\n\n  applyToPoint(point) {\n    var {\n      x,\n      y\n    } = this.scale;\n    point.applyTransform([x || 0.0, 0, 0, y || 0.0, 0, 0]);\n  }\n\n}\n\nclass Matrix {\n  constructor(_, matrix, transformOrigin) {\n    this.type = 'matrix';\n    this.matrix = [];\n    this.originX = null;\n    this.originY = null;\n    this.matrix = toNumbers(matrix);\n    this.originX = transformOrigin[0];\n    this.originY = transformOrigin[1];\n  }\n\n  apply(ctx) {\n    var {\n      originX,\n      originY,\n      matrix\n    } = this;\n    var tx = originX.getPixels('x');\n    var ty = originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.transform(matrix[0], matrix[1], matrix[2], matrix[3], matrix[4], matrix[5]);\n    ctx.translate(-tx, -ty);\n  }\n\n  unapply(ctx) {\n    var {\n      originX,\n      originY,\n      matrix\n    } = this;\n    var a = matrix[0];\n    var b = matrix[2];\n    var c = matrix[4];\n    var d = matrix[1];\n    var e = matrix[3];\n    var f = matrix[5];\n    var g = 0.0;\n    var h = 0.0;\n    var i = 1.0;\n    var det = 1 / (a * (e * i - f * h) - b * (d * i - f * g) + c * (d * h - e * g));\n    var tx = originX.getPixels('x');\n    var ty = originY.getPixels('y');\n    ctx.translate(tx, ty);\n    ctx.transform(det * (e * i - f * h), det * (f * g - d * i), det * (c * h - b * i), det * (a * i - c * g), det * (b * f - c * e), det * (c * d - a * f));\n    ctx.translate(-tx, -ty);\n  }\n\n  applyToPoint(point) {\n    point.applyTransform(this.matrix);\n  }\n\n}\n\nclass Skew extends Matrix {\n  constructor(document, skew, transformOrigin) {\n    super(document, skew, transformOrigin);\n    this.type = 'skew';\n    this.angle = null;\n    this.angle = new Property(document, 'angle', skew);\n  }\n\n}\n\nclass SkewX extends Skew {\n  constructor(document, skew, transformOrigin) {\n    super(document, skew, transformOrigin);\n    this.type = 'skewX';\n    this.matrix = [1, 0, Math.tan(this.angle.getRadians()), 1, 0, 0];\n  }\n\n}\n\nclass SkewY extends Skew {\n  constructor(document, skew, transformOrigin) {\n    super(document, skew, transformOrigin);\n    this.type = 'skewY';\n    this.matrix = [1, Math.tan(this.angle.getRadians()), 0, 1, 0, 0];\n  }\n\n}\n\nfunction parseTransforms(transform) {\n  return compressSpaces(transform).trim().replace(/\\)([a-zA-Z])/g, ') $1').replace(/\\)(\\s?,\\s?)/g, ') ').split(/\\s(?=[a-z])/);\n}\n\nfunction parseTransform(transform) {\n  var [type, value] = transform.split('(');\n  return [type.trim(), value.trim().replace(')', '')];\n}\n\nclass Transform {\n  constructor(document, transform, transformOrigin) {\n    this.document = document;\n    this.transforms = [];\n    var data = parseTransforms(transform);\n    data.forEach(transform => {\n      if (transform === 'none') {\n        return;\n      }\n\n      var [type, value] = parseTransform(transform);\n      var TransformType = Transform.transformTypes[type];\n\n      if (typeof TransformType !== 'undefined') {\n        this.transforms.push(new TransformType(this.document, value, transformOrigin));\n      }\n    });\n  }\n\n  static fromElement(document, element) {\n    var transformStyle = element.getStyle('transform', false, true);\n    var [transformOriginXProperty, transformOriginYProperty = transformOriginXProperty] = element.getStyle('transform-origin', false, true).split();\n    var transformOrigin = [transformOriginXProperty, transformOriginYProperty];\n\n    if (transformStyle.hasValue()) {\n      return new Transform(document, transformStyle.getString(), transformOrigin);\n    }\n\n    return null;\n  }\n\n  apply(ctx) {\n    var {\n      transforms\n    } = this;\n    var len = transforms.length;\n\n    for (var i = 0; i < len; i++) {\n      transforms[i].apply(ctx);\n    }\n  }\n\n  unapply(ctx) {\n    var {\n      transforms\n    } = this;\n    var len = transforms.length;\n\n    for (var i = len - 1; i >= 0; i--) {\n      transforms[i].unapply(ctx);\n    }\n  } // TODO: applyToPoint unused ... remove?\n\n\n  applyToPoint(point) {\n    var {\n      transforms\n    } = this;\n    var len = transforms.length;\n\n    for (var i = 0; i < len; i++) {\n      transforms[i].applyToPoint(point);\n    }\n  }\n\n}\nTransform.transformTypes = {\n  translate: Translate,\n  rotate: Rotate,\n  scale: Scale,\n  matrix: Matrix,\n  skewX: SkewX,\n  skewY: SkewY\n};\n\nclass Element {\n  constructor(document, node) {\n    var captureTextNodes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    this.document = document;\n    this.node = node;\n    this.captureTextNodes = captureTextNodes;\n    this.attributes = {};\n    this.styles = {};\n    this.stylesSpecificity = {};\n    this.animationFrozen = false;\n    this.animationFrozenValue = '';\n    this.parent = null;\n    this.children = [];\n\n    if (!node || node.nodeType !== 1) {\n      // ELEMENT_NODE\n      return;\n    } // add attributes\n\n\n    Array.from(node.attributes).forEach(attribute => {\n      var nodeName = normalizeAttributeName(attribute.nodeName);\n      this.attributes[nodeName] = new Property(document, nodeName, attribute.value);\n    });\n    this.addStylesFromStyleDefinition(); // add inline styles\n\n    if (this.getAttribute('style').hasValue()) {\n      var styles = this.getAttribute('style').getString().split(';').map(_ => _.trim());\n      styles.forEach(style => {\n        if (!style) {\n          return;\n        }\n\n        var [name, value] = style.split(':').map(_ => _.trim());\n        this.styles[name] = new Property(document, name, value);\n      });\n    }\n\n    var {\n      definitions\n    } = document;\n    var id = this.getAttribute('id'); // add id\n\n    if (id.hasValue()) {\n      if (!definitions[id.getString()]) {\n        definitions[id.getString()] = this;\n      }\n    }\n\n    Array.from(node.childNodes).forEach(childNode => {\n      if (childNode.nodeType === 1) {\n        this.addChild(childNode); // ELEMENT_NODE\n      } else if (captureTextNodes && (childNode.nodeType === 3 || childNode.nodeType === 4)) {\n        var textNode = document.createTextNode(childNode);\n\n        if (textNode.getText().length > 0) {\n          this.addChild(textNode); // TEXT_NODE\n        }\n      }\n    });\n  }\n\n  getAttribute(name) {\n    var createIfNotExists = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var attr = this.attributes[name];\n\n    if (!attr && createIfNotExists) {\n      var _attr = new Property(this.document, name, '');\n\n      this.attributes[name] = _attr;\n      return _attr;\n    }\n\n    return attr || Property.empty(this.document);\n  }\n\n  getHrefAttribute() {\n    for (var key in this.attributes) {\n      if (key === 'href' || key.endsWith(':href')) {\n        return this.attributes[key];\n      }\n    }\n\n    return Property.empty(this.document);\n  }\n\n  getStyle(name) {\n    var createIfNotExists = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var skipAncestors = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var style = this.styles[name];\n\n    if (style) {\n      return style;\n    }\n\n    var attr = this.getAttribute(name);\n\n    if (attr !== null && attr !== void 0 && attr.hasValue()) {\n      this.styles[name] = attr; // move up to me to cache\n\n      return attr;\n    }\n\n    if (!skipAncestors) {\n      var {\n        parent\n      } = this;\n\n      if (parent) {\n        var parentStyle = parent.getStyle(name);\n\n        if (parentStyle !== null && parentStyle !== void 0 && parentStyle.hasValue()) {\n          return parentStyle;\n        }\n      }\n    }\n\n    if (createIfNotExists) {\n      var _style = new Property(this.document, name, '');\n\n      this.styles[name] = _style;\n      return _style;\n    }\n\n    return style || Property.empty(this.document);\n  }\n\n  render(ctx) {\n    // don't render display=none\n    // don't render visibility=hidden\n    if (this.getStyle('display').getString() === 'none' || this.getStyle('visibility').getString() === 'hidden') {\n      return;\n    }\n\n    ctx.save();\n\n    if (this.getStyle('mask').hasValue()) {\n      // mask\n      var mask = this.getStyle('mask').getDefinition();\n\n      if (mask) {\n        this.applyEffects(ctx);\n        mask.apply(ctx, this);\n      }\n    } else if (this.getStyle('filter').getValue('none') !== 'none') {\n      // filter\n      var filter = this.getStyle('filter').getDefinition();\n\n      if (filter) {\n        this.applyEffects(ctx);\n        filter.apply(ctx, this);\n      }\n    } else {\n      this.setContext(ctx);\n      this.renderChildren(ctx);\n      this.clearContext(ctx);\n    }\n\n    ctx.restore();\n  }\n\n  setContext(_) {// NO RENDER\n  }\n\n  applyEffects(ctx) {\n    // transform\n    var transform = Transform.fromElement(this.document, this);\n\n    if (transform) {\n      transform.apply(ctx);\n    } // clip\n\n\n    var clipPathStyleProp = this.getStyle('clip-path', false, true);\n\n    if (clipPathStyleProp.hasValue()) {\n      var clip = clipPathStyleProp.getDefinition();\n\n      if (clip) {\n        clip.apply(ctx);\n      }\n    }\n  }\n\n  clearContext(_) {// NO RENDER\n  }\n\n  renderChildren(ctx) {\n    this.children.forEach(child => {\n      child.render(ctx);\n    });\n  }\n\n  addChild(childNode) {\n    var child = childNode instanceof Element ? childNode : this.document.createElement(childNode);\n    child.parent = this;\n\n    if (!Element.ignoreChildTypes.includes(child.type)) {\n      this.children.push(child);\n    }\n  }\n\n  matchesSelector(selector) {\n    var _node$getAttribute;\n\n    var {\n      node\n    } = this;\n\n    if (typeof node.matches === 'function') {\n      return node.matches(selector);\n    }\n\n    var styleClasses = (_node$getAttribute = node.getAttribute) === null || _node$getAttribute === void 0 ? void 0 : _node$getAttribute.call(node, 'class');\n\n    if (!styleClasses || styleClasses === '') {\n      return false;\n    }\n\n    return styleClasses.split(' ').some(styleClass => \".\".concat(styleClass) === selector);\n  }\n\n  addStylesFromStyleDefinition() {\n    var {\n      styles,\n      stylesSpecificity\n    } = this.document;\n\n    for (var selector in styles) {\n      if (!selector.startsWith('@') && this.matchesSelector(selector)) {\n        var style = styles[selector];\n        var specificity = stylesSpecificity[selector];\n\n        if (style) {\n          for (var name in style) {\n            var existingSpecificity = this.stylesSpecificity[name];\n\n            if (typeof existingSpecificity === 'undefined') {\n              existingSpecificity = '000';\n            }\n\n            if (specificity >= existingSpecificity) {\n              this.styles[name] = style[name];\n              this.stylesSpecificity[name] = specificity;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  removeStyles(element, ignoreStyles) {\n    var toRestore = ignoreStyles.reduce((toRestore, name) => {\n      var styleProp = element.getStyle(name);\n\n      if (!styleProp.hasValue()) {\n        return toRestore;\n      }\n\n      var value = styleProp.getString();\n      styleProp.setValue('');\n      return [...toRestore, [name, value]];\n    }, []);\n    return toRestore;\n  }\n\n  restoreStyles(element, styles) {\n    styles.forEach(_ref => {\n      var [name, value] = _ref;\n      element.getStyle(name, true).setValue(value);\n    });\n  }\n\n  isFirstChild() {\n    var _this$parent;\n\n    return ((_this$parent = this.parent) === null || _this$parent === void 0 ? void 0 : _this$parent.children.indexOf(this)) === 0;\n  }\n\n}\nElement.ignoreChildTypes = ['title'];\n\nclass UnknownElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n  }\n\n}\n\nfunction wrapFontFamily(fontFamily) {\n  var trimmed = fontFamily.trim();\n  return /^('|\")/.test(trimmed) ? trimmed : \"\\\"\".concat(trimmed, \"\\\"\");\n}\n\nfunction prepareFontFamily(fontFamily) {\n  return typeof process === 'undefined' ? fontFamily : fontFamily.trim().split(',').map(wrapFontFamily).join(',');\n}\n/**\r\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-style\r\n * @param fontStyle\r\n * @returns CSS font style.\r\n */\n\n\nfunction prepareFontStyle(fontStyle) {\n  if (!fontStyle) {\n    return '';\n  }\n\n  var targetFontStyle = fontStyle.trim().toLowerCase();\n\n  switch (targetFontStyle) {\n    case 'normal':\n    case 'italic':\n    case 'oblique':\n    case 'inherit':\n    case 'initial':\n    case 'unset':\n      return targetFontStyle;\n\n    default:\n      if (/^oblique\\s+(-|)\\d+deg$/.test(targetFontStyle)) {\n        return targetFontStyle;\n      }\n\n      return '';\n  }\n}\n/**\r\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight\r\n * @param fontWeight\r\n * @returns CSS font weight.\r\n */\n\n\nfunction prepareFontWeight(fontWeight) {\n  if (!fontWeight) {\n    return '';\n  }\n\n  var targetFontWeight = fontWeight.trim().toLowerCase();\n\n  switch (targetFontWeight) {\n    case 'normal':\n    case 'bold':\n    case 'lighter':\n    case 'bolder':\n    case 'inherit':\n    case 'initial':\n    case 'unset':\n      return targetFontWeight;\n\n    default:\n      if (/^[\\d.]+$/.test(targetFontWeight)) {\n        return targetFontWeight;\n      }\n\n      return '';\n  }\n}\n\nclass Font {\n  constructor(fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit) {\n    var inheritFont = inherit ? typeof inherit === 'string' ? Font.parse(inherit) : inherit : {};\n    this.fontFamily = fontFamily || inheritFont.fontFamily;\n    this.fontSize = fontSize || inheritFont.fontSize;\n    this.fontStyle = fontStyle || inheritFont.fontStyle;\n    this.fontWeight = fontWeight || inheritFont.fontWeight;\n    this.fontVariant = fontVariant || inheritFont.fontVariant;\n  }\n\n  static parse() {\n    var font = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var inherit = arguments.length > 1 ? arguments[1] : undefined;\n    var fontStyle = '';\n    var fontVariant = '';\n    var fontWeight = '';\n    var fontSize = '';\n    var fontFamily = '';\n    var parts = compressSpaces(font).trim().split(' ');\n    var set = {\n      fontSize: false,\n      fontStyle: false,\n      fontWeight: false,\n      fontVariant: false\n    };\n    parts.forEach(part => {\n      switch (true) {\n        case !set.fontStyle && Font.styles.includes(part):\n          if (part !== 'inherit') {\n            fontStyle = part;\n          }\n\n          set.fontStyle = true;\n          break;\n\n        case !set.fontVariant && Font.variants.includes(part):\n          if (part !== 'inherit') {\n            fontVariant = part;\n          }\n\n          set.fontStyle = true;\n          set.fontVariant = true;\n          break;\n\n        case !set.fontWeight && Font.weights.includes(part):\n          if (part !== 'inherit') {\n            fontWeight = part;\n          }\n\n          set.fontStyle = true;\n          set.fontVariant = true;\n          set.fontWeight = true;\n          break;\n\n        case !set.fontSize:\n          if (part !== 'inherit') {\n            [fontSize] = part.split('/');\n          }\n\n          set.fontStyle = true;\n          set.fontVariant = true;\n          set.fontWeight = true;\n          set.fontSize = true;\n          break;\n\n        default:\n          if (part !== 'inherit') {\n            fontFamily += part;\n          }\n\n      }\n    });\n    return new Font(fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit);\n  }\n\n  toString() {\n    return [prepareFontStyle(this.fontStyle), this.fontVariant, prepareFontWeight(this.fontWeight), this.fontSize, // Wrap fontFamily only on nodejs and only for canvas.ctx\n    prepareFontFamily(this.fontFamily)].join(' ').trim();\n  }\n\n}\nFont.styles = 'normal|italic|oblique|inherit';\nFont.variants = 'normal|small-caps|inherit';\nFont.weights = 'normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit';\n\nclass BoundingBox {\n  constructor() {\n    var x1 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Number.NaN;\n    var y1 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.NaN;\n    var x2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Number.NaN;\n    var y2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Number.NaN;\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n    this.addPoint(x1, y1);\n    this.addPoint(x2, y2);\n  }\n\n  get x() {\n    return this.x1;\n  }\n\n  get y() {\n    return this.y1;\n  }\n\n  get width() {\n    return this.x2 - this.x1;\n  }\n\n  get height() {\n    return this.y2 - this.y1;\n  }\n\n  addPoint(x, y) {\n    if (typeof x !== 'undefined') {\n      if (isNaN(this.x1) || isNaN(this.x2)) {\n        this.x1 = x;\n        this.x2 = x;\n      }\n\n      if (x < this.x1) {\n        this.x1 = x;\n      }\n\n      if (x > this.x2) {\n        this.x2 = x;\n      }\n    }\n\n    if (typeof y !== 'undefined') {\n      if (isNaN(this.y1) || isNaN(this.y2)) {\n        this.y1 = y;\n        this.y2 = y;\n      }\n\n      if (y < this.y1) {\n        this.y1 = y;\n      }\n\n      if (y > this.y2) {\n        this.y2 = y;\n      }\n    }\n  }\n\n  addX(x) {\n    this.addPoint(x, null);\n  }\n\n  addY(y) {\n    this.addPoint(null, y);\n  }\n\n  addBoundingBox(boundingBox) {\n    if (!boundingBox) {\n      return;\n    }\n\n    var {\n      x1,\n      y1,\n      x2,\n      y2\n    } = boundingBox;\n    this.addPoint(x1, y1);\n    this.addPoint(x2, y2);\n  }\n\n  sumCubic(t, p0, p1, p2, p3) {\n    return Math.pow(1 - t, 3) * p0 + 3 * Math.pow(1 - t, 2) * t * p1 + 3 * (1 - t) * Math.pow(t, 2) * p2 + Math.pow(t, 3) * p3;\n  }\n\n  bezierCurveAdd(forX, p0, p1, p2, p3) {\n    var b = 6 * p0 - 12 * p1 + 6 * p2;\n    var a = -3 * p0 + 9 * p1 - 9 * p2 + 3 * p3;\n    var c = 3 * p1 - 3 * p0;\n\n    if (a === 0) {\n      if (b === 0) {\n        return;\n      }\n\n      var t = -c / b;\n\n      if (0 < t && t < 1) {\n        if (forX) {\n          this.addX(this.sumCubic(t, p0, p1, p2, p3));\n        } else {\n          this.addY(this.sumCubic(t, p0, p1, p2, p3));\n        }\n      }\n\n      return;\n    }\n\n    var b2ac = Math.pow(b, 2) - 4 * c * a;\n\n    if (b2ac < 0) {\n      return;\n    }\n\n    var t1 = (-b + Math.sqrt(b2ac)) / (2 * a);\n\n    if (0 < t1 && t1 < 1) {\n      if (forX) {\n        this.addX(this.sumCubic(t1, p0, p1, p2, p3));\n      } else {\n        this.addY(this.sumCubic(t1, p0, p1, p2, p3));\n      }\n    }\n\n    var t2 = (-b - Math.sqrt(b2ac)) / (2 * a);\n\n    if (0 < t2 && t2 < 1) {\n      if (forX) {\n        this.addX(this.sumCubic(t2, p0, p1, p2, p3));\n      } else {\n        this.addY(this.sumCubic(t2, p0, p1, p2, p3));\n      }\n    }\n  } // from http://blog.hackers-cafe.net/2009/06/how-to-calculate-bezier-curves-bounding.html\n\n\n  addBezierCurve(p0x, p0y, p1x, p1y, p2x, p2y, p3x, p3y) {\n    this.addPoint(p0x, p0y);\n    this.addPoint(p3x, p3y);\n    this.bezierCurveAdd(true, p0x, p1x, p2x, p3x);\n    this.bezierCurveAdd(false, p0y, p1y, p2y, p3y);\n  }\n\n  addQuadraticCurve(p0x, p0y, p1x, p1y, p2x, p2y) {\n    var cp1x = p0x + 2 / 3 * (p1x - p0x); // CP1 = QP0 + 2/3 *(QP1-QP0)\n\n    var cp1y = p0y + 2 / 3 * (p1y - p0y); // CP1 = QP0 + 2/3 *(QP1-QP0)\n\n    var cp2x = cp1x + 1 / 3 * (p2x - p0x); // CP2 = CP1 + 1/3 *(QP2-QP0)\n\n    var cp2y = cp1y + 1 / 3 * (p2y - p0y); // CP2 = CP1 + 1/3 *(QP2-QP0)\n\n    this.addBezierCurve(p0x, p0y, cp1x, cp2x, cp1y, cp2y, p2x, p2y);\n  }\n\n  isPointInBox(x, y) {\n    var {\n      x1,\n      y1,\n      x2,\n      y2\n    } = this;\n    return x1 <= x && x <= x2 && y1 <= y && y <= y2;\n  }\n\n}\n\nclass PathParser extends SVGPathData {\n  constructor(path) {\n    super(path // Fix spaces after signs.\n    .replace(/([+\\-.])\\s+/gm, '$1') // Remove invalid part.\n    .replace(/[^MmZzLlHhVvCcSsQqTtAae\\d\\s.,+-].*/g, ''));\n    this.control = null;\n    this.start = null;\n    this.current = null;\n    this.command = null;\n    this.commands = this.commands;\n    this.i = -1;\n    this.previousCommand = null;\n    this.points = [];\n    this.angles = [];\n  }\n\n  reset() {\n    this.i = -1;\n    this.command = null;\n    this.previousCommand = null;\n    this.start = new Point(0, 0);\n    this.control = new Point(0, 0);\n    this.current = new Point(0, 0);\n    this.points = [];\n    this.angles = [];\n  }\n\n  isEnd() {\n    var {\n      i,\n      commands\n    } = this;\n    return i >= commands.length - 1;\n  }\n\n  next() {\n    var command = this.commands[++this.i];\n    this.previousCommand = this.command;\n    this.command = command;\n    return command;\n  }\n\n  getPoint() {\n    var xProp = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'x';\n    var yProp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'y';\n    var point = new Point(this.command[xProp], this.command[yProp]);\n    return this.makeAbsolute(point);\n  }\n\n  getAsControlPoint(xProp, yProp) {\n    var point = this.getPoint(xProp, yProp);\n    this.control = point;\n    return point;\n  }\n\n  getAsCurrentPoint(xProp, yProp) {\n    var point = this.getPoint(xProp, yProp);\n    this.current = point;\n    return point;\n  }\n\n  getReflectedControlPoint() {\n    var previousCommand = this.previousCommand.type;\n\n    if (previousCommand !== SVGPathData.CURVE_TO && previousCommand !== SVGPathData.SMOOTH_CURVE_TO && previousCommand !== SVGPathData.QUAD_TO && previousCommand !== SVGPathData.SMOOTH_QUAD_TO) {\n      return this.current;\n    } // reflect point\n\n\n    var {\n      current: {\n        x: cx,\n        y: cy\n      },\n      control: {\n        x: ox,\n        y: oy\n      }\n    } = this;\n    var point = new Point(2 * cx - ox, 2 * cy - oy);\n    return point;\n  }\n\n  makeAbsolute(point) {\n    if (this.command.relative) {\n      var {\n        x,\n        y\n      } = this.current;\n      point.x += x;\n      point.y += y;\n    }\n\n    return point;\n  }\n\n  addMarker(point, from, priorTo) {\n    var {\n      points,\n      angles\n    } = this; // if the last angle isn't filled in because we didn't have this point yet ...\n\n    if (priorTo && angles.length > 0 && !angles[angles.length - 1]) {\n      angles[angles.length - 1] = points[points.length - 1].angleTo(priorTo);\n    }\n\n    this.addMarkerAngle(point, from ? from.angleTo(point) : null);\n  }\n\n  addMarkerAngle(point, angle) {\n    this.points.push(point);\n    this.angles.push(angle);\n  }\n\n  getMarkerPoints() {\n    return this.points;\n  }\n\n  getMarkerAngles() {\n    var {\n      angles\n    } = this;\n    var len = angles.length;\n\n    for (var i = 0; i < len; i++) {\n      if (!angles[i]) {\n        for (var j = i + 1; j < len; j++) {\n          if (angles[j]) {\n            angles[i] = angles[j];\n            break;\n          }\n        }\n      }\n    }\n\n    return angles;\n  }\n\n}\n\nclass RenderedElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.modifiedEmSizeStack = false;\n  }\n\n  calculateOpacity() {\n    var opacity = 1.0; // eslint-disable-next-line @typescript-eslint/no-this-alias, consistent-this\n\n    var element = this;\n\n    while (element) {\n      var opacityStyle = element.getStyle('opacity', false, true); // no ancestors on style call\n\n      if (opacityStyle.hasValue(true)) {\n        opacity *= opacityStyle.getNumber();\n      }\n\n      element = element.parent;\n    }\n\n    return opacity;\n  }\n\n  setContext(ctx) {\n    var fromMeasure = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    if (!fromMeasure) {\n      // causes stack overflow when measuring text with gradients\n      // fill\n      var fillStyleProp = this.getStyle('fill');\n      var fillOpacityStyleProp = this.getStyle('fill-opacity');\n      var strokeStyleProp = this.getStyle('stroke');\n      var strokeOpacityProp = this.getStyle('stroke-opacity');\n\n      if (fillStyleProp.isUrlDefinition()) {\n        var fillStyle = fillStyleProp.getFillStyleDefinition(this, fillOpacityStyleProp);\n\n        if (fillStyle) {\n          ctx.fillStyle = fillStyle;\n        }\n      } else if (fillStyleProp.hasValue()) {\n        if (fillStyleProp.getString() === 'currentColor') {\n          fillStyleProp.setValue(this.getStyle('color').getColor());\n        }\n\n        var _fillStyle = fillStyleProp.getColor();\n\n        if (_fillStyle !== 'inherit') {\n          ctx.fillStyle = _fillStyle === 'none' ? 'rgba(0,0,0,0)' : _fillStyle;\n        }\n      }\n\n      if (fillOpacityStyleProp.hasValue()) {\n        var _fillStyle2 = new Property(this.document, 'fill', ctx.fillStyle).addOpacity(fillOpacityStyleProp).getColor();\n\n        ctx.fillStyle = _fillStyle2;\n      } // stroke\n\n\n      if (strokeStyleProp.isUrlDefinition()) {\n        var strokeStyle = strokeStyleProp.getFillStyleDefinition(this, strokeOpacityProp);\n\n        if (strokeStyle) {\n          ctx.strokeStyle = strokeStyle;\n        }\n      } else if (strokeStyleProp.hasValue()) {\n        if (strokeStyleProp.getString() === 'currentColor') {\n          strokeStyleProp.setValue(this.getStyle('color').getColor());\n        }\n\n        var _strokeStyle = strokeStyleProp.getString();\n\n        if (_strokeStyle !== 'inherit') {\n          ctx.strokeStyle = _strokeStyle === 'none' ? 'rgba(0,0,0,0)' : _strokeStyle;\n        }\n      }\n\n      if (strokeOpacityProp.hasValue()) {\n        var _strokeStyle2 = new Property(this.document, 'stroke', ctx.strokeStyle).addOpacity(strokeOpacityProp).getString();\n\n        ctx.strokeStyle = _strokeStyle2;\n      }\n\n      var strokeWidthStyleProp = this.getStyle('stroke-width');\n\n      if (strokeWidthStyleProp.hasValue()) {\n        var newLineWidth = strokeWidthStyleProp.getPixels();\n        ctx.lineWidth = !newLineWidth ? PSEUDO_ZERO // browsers don't respect 0 (or node-canvas? :-)\n        : newLineWidth;\n      }\n\n      var strokeLinecapStyleProp = this.getStyle('stroke-linecap');\n      var strokeLinejoinStyleProp = this.getStyle('stroke-linejoin');\n      var strokeMiterlimitProp = this.getStyle('stroke-miterlimit'); // NEED TEST\n      // const pointOrderStyleProp = this.getStyle('paint-order');\n\n      var strokeDasharrayStyleProp = this.getStyle('stroke-dasharray');\n      var strokeDashoffsetProp = this.getStyle('stroke-dashoffset');\n\n      if (strokeLinecapStyleProp.hasValue()) {\n        ctx.lineCap = strokeLinecapStyleProp.getString();\n      }\n\n      if (strokeLinejoinStyleProp.hasValue()) {\n        ctx.lineJoin = strokeLinejoinStyleProp.getString();\n      }\n\n      if (strokeMiterlimitProp.hasValue()) {\n        ctx.miterLimit = strokeMiterlimitProp.getNumber();\n      } // NEED TEST\n      // if (pointOrderStyleProp.hasValue()) {\n      // \t// ?\n      // \tctx.paintOrder = pointOrderStyleProp.getValue();\n      // }\n\n\n      if (strokeDasharrayStyleProp.hasValue() && strokeDasharrayStyleProp.getString() !== 'none') {\n        var gaps = toNumbers(strokeDasharrayStyleProp.getString());\n\n        if (typeof ctx.setLineDash !== 'undefined') {\n          ctx.setLineDash(gaps);\n        } else // @ts-expect-error Handle browser prefix.\n          if (typeof ctx.webkitLineDash !== 'undefined') {\n            // @ts-expect-error Handle browser prefix.\n            ctx.webkitLineDash = gaps;\n          } else // @ts-expect-error Handle browser prefix.\n            if (typeof ctx.mozDash !== 'undefined' && !(gaps.length === 1 && gaps[0] === 0)) {\n              // @ts-expect-error Handle browser prefix.\n              ctx.mozDash = gaps;\n            }\n\n        var offset = strokeDashoffsetProp.getPixels();\n\n        if (typeof ctx.lineDashOffset !== 'undefined') {\n          ctx.lineDashOffset = offset;\n        } else // @ts-expect-error Handle browser prefix.\n          if (typeof ctx.webkitLineDashOffset !== 'undefined') {\n            // @ts-expect-error Handle browser prefix.\n            ctx.webkitLineDashOffset = offset;\n          } else // @ts-expect-error Handle browser prefix.\n            if (typeof ctx.mozDashOffset !== 'undefined') {\n              // @ts-expect-error Handle browser prefix.\n              ctx.mozDashOffset = offset;\n            }\n      }\n    } // font\n\n\n    this.modifiedEmSizeStack = false;\n\n    if (typeof ctx.font !== 'undefined') {\n      var fontStyleProp = this.getStyle('font');\n      var fontStyleStyleProp = this.getStyle('font-style');\n      var fontVariantStyleProp = this.getStyle('font-variant');\n      var fontWeightStyleProp = this.getStyle('font-weight');\n      var fontSizeStyleProp = this.getStyle('font-size');\n      var fontFamilyStyleProp = this.getStyle('font-family');\n      var font = new Font(fontStyleStyleProp.getString(), fontVariantStyleProp.getString(), fontWeightStyleProp.getString(), fontSizeStyleProp.hasValue() ? \"\".concat(fontSizeStyleProp.getPixels(true), \"px\") : '', fontFamilyStyleProp.getString(), Font.parse(fontStyleProp.getString(), ctx.font));\n      fontStyleStyleProp.setValue(font.fontStyle);\n      fontVariantStyleProp.setValue(font.fontVariant);\n      fontWeightStyleProp.setValue(font.fontWeight);\n      fontSizeStyleProp.setValue(font.fontSize);\n      fontFamilyStyleProp.setValue(font.fontFamily);\n      ctx.font = font.toString();\n\n      if (fontSizeStyleProp.isPixels()) {\n        this.document.emSize = fontSizeStyleProp.getPixels();\n        this.modifiedEmSizeStack = true;\n      }\n    }\n\n    if (!fromMeasure) {\n      // effects\n      this.applyEffects(ctx); // opacity\n\n      ctx.globalAlpha = this.calculateOpacity();\n    }\n  }\n\n  clearContext(ctx) {\n    super.clearContext(ctx);\n\n    if (this.modifiedEmSizeStack) {\n      this.document.popEmSize();\n    }\n  }\n\n}\n\nclass PathElement extends RenderedElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'path';\n    this.pathParser = null;\n    this.pathParser = new PathParser(this.getAttribute('d').getString());\n  }\n\n  path(ctx) {\n    var {\n      pathParser\n    } = this;\n    var boundingBox = new BoundingBox();\n    pathParser.reset();\n\n    if (ctx) {\n      ctx.beginPath();\n    }\n\n    while (!pathParser.isEnd()) {\n      switch (pathParser.next().type) {\n        case PathParser.MOVE_TO:\n          this.pathM(ctx, boundingBox);\n          break;\n\n        case PathParser.LINE_TO:\n          this.pathL(ctx, boundingBox);\n          break;\n\n        case PathParser.HORIZ_LINE_TO:\n          this.pathH(ctx, boundingBox);\n          break;\n\n        case PathParser.VERT_LINE_TO:\n          this.pathV(ctx, boundingBox);\n          break;\n\n        case PathParser.CURVE_TO:\n          this.pathC(ctx, boundingBox);\n          break;\n\n        case PathParser.SMOOTH_CURVE_TO:\n          this.pathS(ctx, boundingBox);\n          break;\n\n        case PathParser.QUAD_TO:\n          this.pathQ(ctx, boundingBox);\n          break;\n\n        case PathParser.SMOOTH_QUAD_TO:\n          this.pathT(ctx, boundingBox);\n          break;\n\n        case PathParser.ARC:\n          this.pathA(ctx, boundingBox);\n          break;\n\n        case PathParser.CLOSE_PATH:\n          this.pathZ(ctx, boundingBox);\n          break;\n      }\n    }\n\n    return boundingBox;\n  }\n\n  getBoundingBox(_) {\n    return this.path();\n  }\n\n  getMarkers() {\n    var {\n      pathParser\n    } = this;\n    var points = pathParser.getMarkerPoints();\n    var angles = pathParser.getMarkerAngles();\n    var markers = points.map((point, i) => [point, angles[i]]);\n    return markers;\n  }\n\n  renderChildren(ctx) {\n    this.path(ctx);\n    this.document.screen.mouse.checkPath(this, ctx);\n    var fillRuleStyleProp = this.getStyle('fill-rule');\n\n    if (ctx.fillStyle !== '') {\n      if (fillRuleStyleProp.getString('inherit') !== 'inherit') {\n        ctx.fill(fillRuleStyleProp.getString());\n      } else {\n        ctx.fill();\n      }\n    }\n\n    if (ctx.strokeStyle !== '') {\n      if (this.getAttribute('vector-effect').getString() === 'non-scaling-stroke') {\n        ctx.save();\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n        ctx.stroke();\n        ctx.restore();\n      } else {\n        ctx.stroke();\n      }\n    }\n\n    var markers = this.getMarkers();\n\n    if (markers) {\n      var markersLastIndex = markers.length - 1;\n      var markerStartStyleProp = this.getStyle('marker-start');\n      var markerMidStyleProp = this.getStyle('marker-mid');\n      var markerEndStyleProp = this.getStyle('marker-end');\n\n      if (markerStartStyleProp.isUrlDefinition()) {\n        var marker = markerStartStyleProp.getDefinition();\n        var [point, angle] = markers[0];\n        marker.render(ctx, point, angle);\n      }\n\n      if (markerMidStyleProp.isUrlDefinition()) {\n        var _marker = markerMidStyleProp.getDefinition();\n\n        for (var i = 1; i < markersLastIndex; i++) {\n          var [_point, _angle] = markers[i];\n\n          _marker.render(ctx, _point, _angle);\n        }\n      }\n\n      if (markerEndStyleProp.isUrlDefinition()) {\n        var _marker2 = markerEndStyleProp.getDefinition();\n\n        var [_point2, _angle2] = markers[markersLastIndex];\n\n        _marker2.render(ctx, _point2, _angle2);\n      }\n    }\n  }\n\n  static pathM(pathParser) {\n    var point = pathParser.getAsCurrentPoint();\n    pathParser.start = pathParser.current;\n    return {\n      point\n    };\n  }\n\n  pathM(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      point\n    } = PathElement.pathM(pathParser);\n    var {\n      x,\n      y\n    } = point;\n    pathParser.addMarker(point);\n    boundingBox.addPoint(x, y);\n\n    if (ctx) {\n      ctx.moveTo(x, y);\n    }\n  }\n\n  static pathL(pathParser) {\n    var {\n      current\n    } = pathParser;\n    var point = pathParser.getAsCurrentPoint();\n    return {\n      current,\n      point\n    };\n  }\n\n  pathL(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      point\n    } = PathElement.pathL(pathParser);\n    var {\n      x,\n      y\n    } = point;\n    pathParser.addMarker(point, current);\n    boundingBox.addPoint(x, y);\n\n    if (ctx) {\n      ctx.lineTo(x, y);\n    }\n  }\n\n  static pathH(pathParser) {\n    var {\n      current,\n      command\n    } = pathParser;\n    var point = new Point((command.relative ? current.x : 0) + command.x, current.y);\n    pathParser.current = point;\n    return {\n      current,\n      point\n    };\n  }\n\n  pathH(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      point\n    } = PathElement.pathH(pathParser);\n    var {\n      x,\n      y\n    } = point;\n    pathParser.addMarker(point, current);\n    boundingBox.addPoint(x, y);\n\n    if (ctx) {\n      ctx.lineTo(x, y);\n    }\n  }\n\n  static pathV(pathParser) {\n    var {\n      current,\n      command\n    } = pathParser;\n    var point = new Point(current.x, (command.relative ? current.y : 0) + command.y);\n    pathParser.current = point;\n    return {\n      current,\n      point\n    };\n  }\n\n  pathV(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      point\n    } = PathElement.pathV(pathParser);\n    var {\n      x,\n      y\n    } = point;\n    pathParser.addMarker(point, current);\n    boundingBox.addPoint(x, y);\n\n    if (ctx) {\n      ctx.lineTo(x, y);\n    }\n  }\n\n  static pathC(pathParser) {\n    var {\n      current\n    } = pathParser;\n    var point = pathParser.getPoint('x1', 'y1');\n    var controlPoint = pathParser.getAsControlPoint('x2', 'y2');\n    var currentPoint = pathParser.getAsCurrentPoint();\n    return {\n      current,\n      point,\n      controlPoint,\n      currentPoint\n    };\n  }\n\n  pathC(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      point,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathC(pathParser);\n    pathParser.addMarker(currentPoint, controlPoint, point);\n    boundingBox.addBezierCurve(current.x, current.y, point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n\n    if (ctx) {\n      ctx.bezierCurveTo(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    }\n  }\n\n  static pathS(pathParser) {\n    var {\n      current\n    } = pathParser;\n    var point = pathParser.getReflectedControlPoint();\n    var controlPoint = pathParser.getAsControlPoint('x2', 'y2');\n    var currentPoint = pathParser.getAsCurrentPoint();\n    return {\n      current,\n      point,\n      controlPoint,\n      currentPoint\n    };\n  }\n\n  pathS(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      point,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathS(pathParser);\n    pathParser.addMarker(currentPoint, controlPoint, point);\n    boundingBox.addBezierCurve(current.x, current.y, point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n\n    if (ctx) {\n      ctx.bezierCurveTo(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    }\n  }\n\n  static pathQ(pathParser) {\n    var {\n      current\n    } = pathParser;\n    var controlPoint = pathParser.getAsControlPoint('x1', 'y1');\n    var currentPoint = pathParser.getAsCurrentPoint();\n    return {\n      current,\n      controlPoint,\n      currentPoint\n    };\n  }\n\n  pathQ(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathQ(pathParser);\n    pathParser.addMarker(currentPoint, controlPoint, controlPoint);\n    boundingBox.addQuadraticCurve(current.x, current.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n\n    if (ctx) {\n      ctx.quadraticCurveTo(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    }\n  }\n\n  static pathT(pathParser) {\n    var {\n      current\n    } = pathParser;\n    var controlPoint = pathParser.getReflectedControlPoint();\n    pathParser.control = controlPoint;\n    var currentPoint = pathParser.getAsCurrentPoint();\n    return {\n      current,\n      controlPoint,\n      currentPoint\n    };\n  }\n\n  pathT(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      current,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathT(pathParser);\n    pathParser.addMarker(currentPoint, controlPoint, controlPoint);\n    boundingBox.addQuadraticCurve(current.x, current.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n\n    if (ctx) {\n      ctx.quadraticCurveTo(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    }\n  }\n\n  static pathA(pathParser) {\n    var {\n      current,\n      command\n    } = pathParser;\n    var {\n      rX,\n      rY,\n      xRot,\n      lArcFlag,\n      sweepFlag\n    } = command;\n    var xAxisRotation = xRot * (Math.PI / 180.0);\n    var currentPoint = pathParser.getAsCurrentPoint(); // Conversion from endpoint to center parameterization\n    // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n    // x1', y1'\n\n    var currp = new Point(Math.cos(xAxisRotation) * (current.x - currentPoint.x) / 2.0 + Math.sin(xAxisRotation) * (current.y - currentPoint.y) / 2.0, -Math.sin(xAxisRotation) * (current.x - currentPoint.x) / 2.0 + Math.cos(xAxisRotation) * (current.y - currentPoint.y) / 2.0); // adjust radii\n\n    var l = Math.pow(currp.x, 2) / Math.pow(rX, 2) + Math.pow(currp.y, 2) / Math.pow(rY, 2);\n\n    if (l > 1) {\n      rX *= Math.sqrt(l);\n      rY *= Math.sqrt(l);\n    } // cx', cy'\n\n\n    var s = (lArcFlag === sweepFlag ? -1 : 1) * Math.sqrt((Math.pow(rX, 2) * Math.pow(rY, 2) - Math.pow(rX, 2) * Math.pow(currp.y, 2) - Math.pow(rY, 2) * Math.pow(currp.x, 2)) / (Math.pow(rX, 2) * Math.pow(currp.y, 2) + Math.pow(rY, 2) * Math.pow(currp.x, 2)));\n\n    if (isNaN(s)) {\n      s = 0;\n    }\n\n    var cpp = new Point(s * rX * currp.y / rY, s * -rY * currp.x / rX); // cx, cy\n\n    var centp = new Point((current.x + currentPoint.x) / 2.0 + Math.cos(xAxisRotation) * cpp.x - Math.sin(xAxisRotation) * cpp.y, (current.y + currentPoint.y) / 2.0 + Math.sin(xAxisRotation) * cpp.x + Math.cos(xAxisRotation) * cpp.y); // initial angle\n\n    var a1 = vectorsAngle([1, 0], [(currp.x - cpp.x) / rX, (currp.y - cpp.y) / rY]); // 1\n    // angle delta\n\n    var u = [(currp.x - cpp.x) / rX, (currp.y - cpp.y) / rY];\n    var v = [(-currp.x - cpp.x) / rX, (-currp.y - cpp.y) / rY];\n    var ad = vectorsAngle(u, v); // \n\n    if (vectorsRatio(u, v) <= -1) {\n      ad = Math.PI;\n    }\n\n    if (vectorsRatio(u, v) >= 1) {\n      ad = 0;\n    }\n\n    return {\n      currentPoint,\n      rX,\n      rY,\n      sweepFlag,\n      xAxisRotation,\n      centp,\n      a1,\n      ad\n    };\n  }\n\n  pathA(ctx, boundingBox) {\n    var {\n      pathParser\n    } = this;\n    var {\n      currentPoint,\n      rX,\n      rY,\n      sweepFlag,\n      xAxisRotation,\n      centp,\n      a1,\n      ad\n    } = PathElement.pathA(pathParser); // for markers\n\n    var dir = 1 - sweepFlag ? 1.0 : -1.0;\n    var ah = a1 + dir * (ad / 2.0);\n    var halfWay = new Point(centp.x + rX * Math.cos(ah), centp.y + rY * Math.sin(ah));\n    pathParser.addMarkerAngle(halfWay, ah - dir * Math.PI / 2);\n    pathParser.addMarkerAngle(currentPoint, ah - dir * Math.PI);\n    boundingBox.addPoint(currentPoint.x, currentPoint.y); // TODO: this is too naive, make it better\n\n    if (ctx && !isNaN(a1) && !isNaN(ad)) {\n      var r = rX > rY ? rX : rY;\n      var sx = rX > rY ? 1 : rX / rY;\n      var sy = rX > rY ? rY / rX : 1;\n      ctx.translate(centp.x, centp.y);\n      ctx.rotate(xAxisRotation);\n      ctx.scale(sx, sy);\n      ctx.arc(0, 0, r, a1, a1 + ad, Boolean(1 - sweepFlag));\n      ctx.scale(1 / sx, 1 / sy);\n      ctx.rotate(-xAxisRotation);\n      ctx.translate(-centp.x, -centp.y);\n    }\n  }\n\n  static pathZ(pathParser) {\n    pathParser.current = pathParser.start;\n  }\n\n  pathZ(ctx, boundingBox) {\n    PathElement.pathZ(this.pathParser);\n\n    if (ctx) {\n      // only close path if it is not a straight line\n      if (boundingBox.x1 !== boundingBox.x2 && boundingBox.y1 !== boundingBox.y2) {\n        ctx.closePath();\n      }\n    }\n  }\n\n}\n\nclass GlyphElement extends PathElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'glyph';\n    this.horizAdvX = this.getAttribute('horiz-adv-x').getNumber();\n    this.unicode = this.getAttribute('unicode').getString();\n    this.arabicForm = this.getAttribute('arabic-form').getString();\n  }\n\n}\n\nclass TextElement extends RenderedElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, new.target === TextElement ? true : captureTextNodes);\n    this.type = 'text';\n    this.x = 0;\n    this.y = 0;\n    this.measureCache = -1;\n  }\n\n  setContext(ctx) {\n    var fromMeasure = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    super.setContext(ctx, fromMeasure);\n    var textBaseline = this.getStyle('dominant-baseline').getTextBaseline() || this.getStyle('alignment-baseline').getTextBaseline();\n\n    if (textBaseline) {\n      ctx.textBaseline = textBaseline;\n    }\n  }\n\n  initializeCoordinates() {\n    this.x = 0;\n    this.y = 0;\n    this.leafTexts = [];\n    this.textChunkStart = 0;\n    this.minX = Number.POSITIVE_INFINITY;\n    this.maxX = Number.NEGATIVE_INFINITY;\n  }\n\n  getBoundingBox(ctx) {\n    if (this.type !== 'text') {\n      return this.getTElementBoundingBox(ctx);\n    } // first, calculate child positions\n\n\n    this.initializeCoordinates();\n    this.adjustChildCoordinatesRecursive(ctx);\n    var boundingBox = null; // then calculate bounding box\n\n    this.children.forEach((_, i) => {\n      var childBoundingBox = this.getChildBoundingBox(ctx, this, this, i);\n\n      if (!boundingBox) {\n        boundingBox = childBoundingBox;\n      } else {\n        boundingBox.addBoundingBox(childBoundingBox);\n      }\n    });\n    return boundingBox;\n  }\n\n  getFontSize() {\n    var {\n      document,\n      parent\n    } = this;\n    var inheritFontSize = Font.parse(document.ctx.font).fontSize;\n    var fontSize = parent.getStyle('font-size').getNumber(inheritFontSize);\n    return fontSize;\n  }\n\n  getTElementBoundingBox(ctx) {\n    var fontSize = this.getFontSize();\n    return new BoundingBox(this.x, this.y - fontSize, this.x + this.measureText(ctx), this.y);\n  }\n\n  getGlyph(font, text, i) {\n    var char = text[i];\n    var glyph = null;\n\n    if (font.isArabic) {\n      var len = text.length;\n      var prevChar = text[i - 1];\n      var nextChar = text[i + 1];\n      var arabicForm = 'isolated';\n\n      if ((i === 0 || prevChar === ' ') && i < len - 1 && nextChar !== ' ') {\n        arabicForm = 'terminal';\n      }\n\n      if (i > 0 && prevChar !== ' ' && i < len - 1 && nextChar !== ' ') {\n        arabicForm = 'medial';\n      }\n\n      if (i > 0 && prevChar !== ' ' && (i === len - 1 || nextChar === ' ')) {\n        arabicForm = 'initial';\n      }\n\n      if (typeof font.glyphs[char] !== 'undefined') {\n        // NEED TEST\n        var maybeGlyph = font.glyphs[char];\n        glyph = maybeGlyph instanceof GlyphElement ? maybeGlyph : maybeGlyph[arabicForm];\n      }\n    } else {\n      glyph = font.glyphs[char];\n    }\n\n    if (!glyph) {\n      glyph = font.missingGlyph;\n    }\n\n    return glyph;\n  }\n\n  getText() {\n    return '';\n  }\n\n  getTextFromNode(node) {\n    var textNode = node || this.node;\n    var childNodes = Array.from(textNode.parentNode.childNodes);\n    var index = childNodes.indexOf(textNode);\n    var lastIndex = childNodes.length - 1;\n    var text = compressSpaces( // textNode.value\n    // || textNode.text\n    textNode.textContent || '');\n\n    if (index === 0) {\n      text = trimLeft(text);\n    }\n\n    if (index === lastIndex) {\n      text = trimRight(text);\n    }\n\n    return text;\n  }\n\n  renderChildren(ctx) {\n    if (this.type !== 'text') {\n      this.renderTElementChildren(ctx);\n      return;\n    } // first, calculate child positions\n\n\n    this.initializeCoordinates();\n    this.adjustChildCoordinatesRecursive(ctx); // then render\n\n    this.children.forEach((_, i) => {\n      this.renderChild(ctx, this, this, i);\n    });\n    var {\n      mouse\n    } = this.document.screen; // Do not calc bounding box if mouse is not working.\n\n    if (mouse.isWorking()) {\n      mouse.checkBoundingBox(this, this.getBoundingBox(ctx));\n    }\n  }\n\n  renderTElementChildren(ctx) {\n    var {\n      document,\n      parent\n    } = this;\n    var renderText = this.getText();\n    var customFont = parent.getStyle('font-family').getDefinition();\n\n    if (customFont) {\n      var {\n        unitsPerEm\n      } = customFont.fontFace;\n      var ctxFont = Font.parse(document.ctx.font);\n      var fontSize = parent.getStyle('font-size').getNumber(ctxFont.fontSize);\n      var fontStyle = parent.getStyle('font-style').getString(ctxFont.fontStyle);\n      var scale = fontSize / unitsPerEm;\n      var text = customFont.isRTL ? renderText.split('').reverse().join('') : renderText;\n      var dx = toNumbers(parent.getAttribute('dx').getString());\n      var len = text.length;\n\n      for (var i = 0; i < len; i++) {\n        var glyph = this.getGlyph(customFont, text, i);\n        ctx.translate(this.x, this.y);\n        ctx.scale(scale, -scale);\n        var lw = ctx.lineWidth;\n        ctx.lineWidth = ctx.lineWidth * unitsPerEm / fontSize;\n\n        if (fontStyle === 'italic') {\n          ctx.transform(1, 0, .4, 1, 0, 0);\n        }\n\n        glyph.render(ctx);\n\n        if (fontStyle === 'italic') {\n          ctx.transform(1, 0, -.4, 1, 0, 0);\n        }\n\n        ctx.lineWidth = lw;\n        ctx.scale(1 / scale, -1 / scale);\n        ctx.translate(-this.x, -this.y);\n        this.x += fontSize * (glyph.horizAdvX || customFont.horizAdvX) / unitsPerEm;\n\n        if (typeof dx[i] !== 'undefined' && !isNaN(dx[i])) {\n          this.x += dx[i];\n        }\n      }\n\n      return;\n    }\n\n    var {\n      x,\n      y\n    } = this; // NEED TEST\n    // if (ctx.paintOrder === 'stroke') {\n    // \tif (ctx.strokeStyle) {\n    // \t\tctx.strokeText(renderText, x, y);\n    // \t}\n    // \tif (ctx.fillStyle) {\n    // \t\tctx.fillText(renderText, x, y);\n    // \t}\n    // } else {\n\n    if (ctx.fillStyle) {\n      ctx.fillText(renderText, x, y);\n    }\n\n    if (ctx.strokeStyle) {\n      ctx.strokeText(renderText, x, y);\n    } // }\n\n  }\n\n  applyAnchoring() {\n    if (this.textChunkStart >= this.leafTexts.length) {\n      return;\n    } // This is basically the \"Apply anchoring\" part of https://www.w3.org/TR/SVG2/text.html#TextLayoutAlgorithm.\n    // The difference is that we apply the anchoring as soon as a chunk is finished. This saves some extra looping.\n    // Vertical text is not supported.\n\n\n    var firstElement = this.leafTexts[this.textChunkStart];\n    var textAnchor = firstElement.getStyle('text-anchor').getString('start');\n    var isRTL = false; // we treat RTL like LTR\n\n    var shift = 0;\n\n    if (textAnchor === 'start' && !isRTL || textAnchor === 'end' && isRTL) {\n      shift = firstElement.x - this.minX;\n    } else if (textAnchor === 'end' && !isRTL || textAnchor === 'start' && isRTL) {\n      shift = firstElement.x - this.maxX;\n    } else {\n      shift = firstElement.x - (this.minX + this.maxX) / 2;\n    }\n\n    for (var i = this.textChunkStart; i < this.leafTexts.length; i++) {\n      this.leafTexts[i].x += shift;\n    } // start new chunk\n\n\n    this.minX = Number.POSITIVE_INFINITY;\n    this.maxX = Number.NEGATIVE_INFINITY;\n    this.textChunkStart = this.leafTexts.length;\n  }\n\n  adjustChildCoordinatesRecursive(ctx) {\n    this.children.forEach((_, i) => {\n      this.adjustChildCoordinatesRecursiveCore(ctx, this, this, i);\n    });\n    this.applyAnchoring();\n  }\n\n  adjustChildCoordinatesRecursiveCore(ctx, textParent, parent, i) {\n    var child = parent.children[i];\n\n    if (child.children.length > 0) {\n      child.children.forEach((_, i) => {\n        textParent.adjustChildCoordinatesRecursiveCore(ctx, textParent, child, i);\n      });\n    } else {\n      // only leafs are relevant\n      this.adjustChildCoordinates(ctx, textParent, parent, i);\n    }\n  }\n\n  adjustChildCoordinates(ctx, textParent, parent, i) {\n    var child = parent.children[i];\n\n    if (typeof child.measureText !== 'function') {\n      return child;\n    }\n\n    ctx.save();\n    child.setContext(ctx, true);\n    var xAttr = child.getAttribute('x');\n    var yAttr = child.getAttribute('y');\n    var dxAttr = child.getAttribute('dx');\n    var dyAttr = child.getAttribute('dy');\n    var customFont = child.getStyle('font-family').getDefinition();\n    var isRTL = Boolean(customFont) && customFont.isRTL;\n\n    if (i === 0) {\n      // First children inherit attributes from parent(s). Positional attributes\n      // are only inherited from a parent to it's first child.\n      if (!xAttr.hasValue()) {\n        xAttr.setValue(child.getInheritedAttribute('x'));\n      }\n\n      if (!yAttr.hasValue()) {\n        yAttr.setValue(child.getInheritedAttribute('y'));\n      }\n\n      if (!dxAttr.hasValue()) {\n        dxAttr.setValue(child.getInheritedAttribute('dx'));\n      }\n\n      if (!dyAttr.hasValue()) {\n        dyAttr.setValue(child.getInheritedAttribute('dy'));\n      }\n    }\n\n    var width = child.measureText(ctx);\n\n    if (isRTL) {\n      textParent.x -= width;\n    }\n\n    if (xAttr.hasValue()) {\n      // an \"x\" attribute marks the start of a new chunk\n      textParent.applyAnchoring();\n      child.x = xAttr.getPixels('x');\n\n      if (dxAttr.hasValue()) {\n        child.x += dxAttr.getPixels('x');\n      }\n    } else {\n      if (dxAttr.hasValue()) {\n        textParent.x += dxAttr.getPixels('x');\n      }\n\n      child.x = textParent.x;\n    }\n\n    textParent.x = child.x;\n\n    if (!isRTL) {\n      textParent.x += width;\n    }\n\n    if (yAttr.hasValue()) {\n      child.y = yAttr.getPixels('y');\n\n      if (dyAttr.hasValue()) {\n        child.y += dyAttr.getPixels('y');\n      }\n    } else {\n      if (dyAttr.hasValue()) {\n        textParent.y += dyAttr.getPixels('y');\n      }\n\n      child.y = textParent.y;\n    }\n\n    textParent.y = child.y; // update the current chunk and it's bounds\n\n    textParent.leafTexts.push(child);\n    textParent.minX = Math.min(textParent.minX, child.x, child.x + width);\n    textParent.maxX = Math.max(textParent.maxX, child.x, child.x + width);\n    child.clearContext(ctx);\n    ctx.restore();\n    return child;\n  }\n\n  getChildBoundingBox(ctx, textParent, parent, i) {\n    var child = parent.children[i]; // not a text node?\n\n    if (typeof child.getBoundingBox !== 'function') {\n      return null;\n    }\n\n    var boundingBox = child.getBoundingBox(ctx);\n\n    if (!boundingBox) {\n      return null;\n    }\n\n    child.children.forEach((_, i) => {\n      var childBoundingBox = textParent.getChildBoundingBox(ctx, textParent, child, i);\n      boundingBox.addBoundingBox(childBoundingBox);\n    });\n    return boundingBox;\n  }\n\n  renderChild(ctx, textParent, parent, i) {\n    var child = parent.children[i];\n    child.render(ctx);\n    child.children.forEach((_, i) => {\n      textParent.renderChild(ctx, textParent, child, i);\n    });\n  }\n\n  measureText(ctx) {\n    var {\n      measureCache\n    } = this;\n\n    if (~measureCache) {\n      return measureCache;\n    }\n\n    var renderText = this.getText();\n    var measure = this.measureTargetText(ctx, renderText);\n    this.measureCache = measure;\n    return measure;\n  }\n\n  measureTargetText(ctx, targetText) {\n    if (!targetText.length) {\n      return 0;\n    }\n\n    var {\n      parent\n    } = this;\n    var customFont = parent.getStyle('font-family').getDefinition();\n\n    if (customFont) {\n      var fontSize = this.getFontSize();\n      var text = customFont.isRTL ? targetText.split('').reverse().join('') : targetText;\n      var dx = toNumbers(parent.getAttribute('dx').getString());\n      var len = text.length;\n      var _measure = 0;\n\n      for (var i = 0; i < len; i++) {\n        var glyph = this.getGlyph(customFont, text, i);\n        _measure += (glyph.horizAdvX || customFont.horizAdvX) * fontSize / customFont.fontFace.unitsPerEm;\n\n        if (typeof dx[i] !== 'undefined' && !isNaN(dx[i])) {\n          _measure += dx[i];\n        }\n      }\n\n      return _measure;\n    }\n\n    if (!ctx.measureText) {\n      return targetText.length * 10;\n    }\n\n    ctx.save();\n    this.setContext(ctx, true);\n    var {\n      width: measure\n    } = ctx.measureText(targetText);\n    this.clearContext(ctx);\n    ctx.restore();\n    return measure;\n  }\n  /**\r\n   * Inherits positional attributes from {@link TextElement} parent(s). Attributes\r\n   * are only inherited from a parent to its first child.\r\n   * @param name - The attribute name.\r\n   * @returns The attribute value or null.\r\n   */\n\n\n  getInheritedAttribute(name) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias,consistent-this\n    var current = this;\n\n    while (current instanceof TextElement && current.isFirstChild()) {\n      var parentAttr = current.parent.getAttribute(name);\n\n      if (parentAttr.hasValue(true)) {\n        return parentAttr.getValue('0');\n      }\n\n      current = current.parent;\n    }\n\n    return null;\n  }\n\n}\n\nclass TSpanElement extends TextElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, new.target === TSpanElement ? true : captureTextNodes);\n    this.type = 'tspan'; // if this node has children, then they own the text\n\n    this.text = this.children.length > 0 ? '' : this.getTextFromNode();\n  }\n\n  getText() {\n    return this.text;\n  }\n\n}\n\nclass TextNode extends TSpanElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'textNode';\n  }\n\n}\n\nclass SVGElement extends RenderedElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'svg';\n    this.root = false;\n  }\n\n  setContext(ctx) {\n    var _this$node$parentNode;\n\n    var {\n      document\n    } = this;\n    var {\n      screen,\n      window\n    } = document;\n    var canvas = ctx.canvas;\n    screen.setDefaults(ctx);\n\n    if (canvas.style && typeof ctx.font !== 'undefined' && window && typeof window.getComputedStyle !== 'undefined') {\n      ctx.font = window.getComputedStyle(canvas).getPropertyValue('font');\n      var fontSizeProp = new Property(document, 'fontSize', Font.parse(ctx.font).fontSize);\n\n      if (fontSizeProp.hasValue()) {\n        document.rootEmSize = fontSizeProp.getPixels('y');\n        document.emSize = document.rootEmSize;\n      }\n    } // create new view port\n\n\n    if (!this.getAttribute('x').hasValue()) {\n      this.getAttribute('x', true).setValue(0);\n    }\n\n    if (!this.getAttribute('y').hasValue()) {\n      this.getAttribute('y', true).setValue(0);\n    }\n\n    var {\n      width,\n      height\n    } = screen.viewPort;\n\n    if (!this.getStyle('width').hasValue()) {\n      this.getStyle('width', true).setValue('100%');\n    }\n\n    if (!this.getStyle('height').hasValue()) {\n      this.getStyle('height', true).setValue('100%');\n    }\n\n    if (!this.getStyle('color').hasValue()) {\n      this.getStyle('color', true).setValue('black');\n    }\n\n    var refXAttr = this.getAttribute('refX');\n    var refYAttr = this.getAttribute('refY');\n    var viewBoxAttr = this.getAttribute('viewBox');\n    var viewBox = viewBoxAttr.hasValue() ? toNumbers(viewBoxAttr.getString()) : null;\n    var clip = !this.root && this.getStyle('overflow').getValue('hidden') !== 'visible';\n    var minX = 0;\n    var minY = 0;\n    var clipX = 0;\n    var clipY = 0;\n\n    if (viewBox) {\n      minX = viewBox[0];\n      minY = viewBox[1];\n    }\n\n    if (!this.root) {\n      width = this.getStyle('width').getPixels('x');\n      height = this.getStyle('height').getPixels('y');\n\n      if (this.type === 'marker') {\n        clipX = minX;\n        clipY = minY;\n        minX = 0;\n        minY = 0;\n      }\n    }\n\n    screen.viewPort.setCurrent(width, height); // Default value of transform-origin is center only for root SVG elements\n    // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/transform-origin\n\n    if (this.node // is not temporary SVGElement\n    && (!this.parent || ((_this$node$parentNode = this.node.parentNode) === null || _this$node$parentNode === void 0 ? void 0 : _this$node$parentNode.nodeName) === 'foreignObject') && this.getStyle('transform', false, true).hasValue() && !this.getStyle('transform-origin', false, true).hasValue()) {\n      this.getStyle('transform-origin', true, true).setValue('50% 50%');\n    }\n\n    super.setContext(ctx);\n    ctx.translate(this.getAttribute('x').getPixels('x'), this.getAttribute('y').getPixels('y'));\n\n    if (viewBox) {\n      width = viewBox[2];\n      height = viewBox[3];\n    }\n\n    document.setViewBox({\n      ctx,\n      aspectRatio: this.getAttribute('preserveAspectRatio').getString(),\n      width: screen.viewPort.width,\n      desiredWidth: width,\n      height: screen.viewPort.height,\n      desiredHeight: height,\n      minX,\n      minY,\n      refX: refXAttr.getValue(),\n      refY: refYAttr.getValue(),\n      clip,\n      clipX,\n      clipY\n    });\n\n    if (viewBox) {\n      screen.viewPort.removeCurrent();\n      screen.viewPort.setCurrent(width, height);\n    }\n  }\n\n  clearContext(ctx) {\n    super.clearContext(ctx);\n    this.document.screen.viewPort.removeCurrent();\n  }\n  /**\r\n   * Resize SVG to fit in given size.\r\n   * @param width\r\n   * @param height\r\n   * @param preserveAspectRatio\r\n   */\n\n\n  resize(width) {\n    var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : width;\n    var preserveAspectRatio = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var widthAttr = this.getAttribute('width', true);\n    var heightAttr = this.getAttribute('height', true);\n    var viewBoxAttr = this.getAttribute('viewBox');\n    var styleAttr = this.getAttribute('style');\n    var originWidth = widthAttr.getNumber(0);\n    var originHeight = heightAttr.getNumber(0);\n\n    if (preserveAspectRatio) {\n      if (typeof preserveAspectRatio === 'string') {\n        this.getAttribute('preserveAspectRatio', true).setValue(preserveAspectRatio);\n      } else {\n        var preserveAspectRatioAttr = this.getAttribute('preserveAspectRatio');\n\n        if (preserveAspectRatioAttr.hasValue()) {\n          preserveAspectRatioAttr.setValue(preserveAspectRatioAttr.getString().replace(/^\\s*(\\S.*\\S)\\s*$/, '$1'));\n        }\n      }\n    }\n\n    widthAttr.setValue(width);\n    heightAttr.setValue(height);\n\n    if (!viewBoxAttr.hasValue()) {\n      viewBoxAttr.setValue(\"0 0 \".concat(originWidth || width, \" \").concat(originHeight || height));\n    }\n\n    if (styleAttr.hasValue()) {\n      var widthStyle = this.getStyle('width');\n      var heightStyle = this.getStyle('height');\n\n      if (widthStyle.hasValue()) {\n        widthStyle.setValue(\"\".concat(width, \"px\"));\n      }\n\n      if (heightStyle.hasValue()) {\n        heightStyle.setValue(\"\".concat(height, \"px\"));\n      }\n    }\n  }\n\n}\n\nclass RectElement extends PathElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'rect';\n  }\n\n  path(ctx) {\n    var x = this.getAttribute('x').getPixels('x');\n    var y = this.getAttribute('y').getPixels('y');\n    var width = this.getStyle('width', false, true).getPixels('x');\n    var height = this.getStyle('height', false, true).getPixels('y');\n    var rxAttr = this.getAttribute('rx');\n    var ryAttr = this.getAttribute('ry');\n    var rx = rxAttr.getPixels('x');\n    var ry = ryAttr.getPixels('y');\n\n    if (rxAttr.hasValue() && !ryAttr.hasValue()) {\n      ry = rx;\n    }\n\n    if (ryAttr.hasValue() && !rxAttr.hasValue()) {\n      rx = ry;\n    }\n\n    rx = Math.min(rx, width / 2.0);\n    ry = Math.min(ry, height / 2.0);\n\n    if (ctx) {\n      var KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);\n      ctx.beginPath(); // always start the path so we don't fill prior paths\n\n      if (height > 0 && width > 0) {\n        ctx.moveTo(x + rx, y);\n        ctx.lineTo(x + width - rx, y);\n        ctx.bezierCurveTo(x + width - rx + KAPPA * rx, y, x + width, y + ry - KAPPA * ry, x + width, y + ry);\n        ctx.lineTo(x + width, y + height - ry);\n        ctx.bezierCurveTo(x + width, y + height - ry + KAPPA * ry, x + width - rx + KAPPA * rx, y + height, x + width - rx, y + height);\n        ctx.lineTo(x + rx, y + height);\n        ctx.bezierCurveTo(x + rx - KAPPA * rx, y + height, x, y + height - ry + KAPPA * ry, x, y + height - ry);\n        ctx.lineTo(x, y + ry);\n        ctx.bezierCurveTo(x, y + ry - KAPPA * ry, x + rx - KAPPA * rx, y, x + rx, y);\n        ctx.closePath();\n      }\n    }\n\n    return new BoundingBox(x, y, x + width, y + height);\n  }\n\n  getMarkers() {\n    return null;\n  }\n\n}\n\nclass CircleElement extends PathElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'circle';\n  }\n\n  path(ctx) {\n    var cx = this.getAttribute('cx').getPixels('x');\n    var cy = this.getAttribute('cy').getPixels('y');\n    var r = this.getAttribute('r').getPixels();\n\n    if (ctx && r > 0) {\n      ctx.beginPath();\n      ctx.arc(cx, cy, r, 0, Math.PI * 2, false);\n      ctx.closePath();\n    }\n\n    return new BoundingBox(cx - r, cy - r, cx + r, cy + r);\n  }\n\n  getMarkers() {\n    return null;\n  }\n\n}\n\nclass EllipseElement extends PathElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'ellipse';\n  }\n\n  path(ctx) {\n    var KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);\n    var rx = this.getAttribute('rx').getPixels('x');\n    var ry = this.getAttribute('ry').getPixels('y');\n    var cx = this.getAttribute('cx').getPixels('x');\n    var cy = this.getAttribute('cy').getPixels('y');\n\n    if (ctx && rx > 0 && ry > 0) {\n      ctx.beginPath();\n      ctx.moveTo(cx + rx, cy);\n      ctx.bezierCurveTo(cx + rx, cy + KAPPA * ry, cx + KAPPA * rx, cy + ry, cx, cy + ry);\n      ctx.bezierCurveTo(cx - KAPPA * rx, cy + ry, cx - rx, cy + KAPPA * ry, cx - rx, cy);\n      ctx.bezierCurveTo(cx - rx, cy - KAPPA * ry, cx - KAPPA * rx, cy - ry, cx, cy - ry);\n      ctx.bezierCurveTo(cx + KAPPA * rx, cy - ry, cx + rx, cy - KAPPA * ry, cx + rx, cy);\n      ctx.closePath();\n    }\n\n    return new BoundingBox(cx - rx, cy - ry, cx + rx, cy + ry);\n  }\n\n  getMarkers() {\n    return null;\n  }\n\n}\n\nclass LineElement extends PathElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'line';\n  }\n\n  getPoints() {\n    return [new Point(this.getAttribute('x1').getPixels('x'), this.getAttribute('y1').getPixels('y')), new Point(this.getAttribute('x2').getPixels('x'), this.getAttribute('y2').getPixels('y'))];\n  }\n\n  path(ctx) {\n    var [{\n      x: x0,\n      y: y0\n    }, {\n      x: x1,\n      y: y1\n    }] = this.getPoints();\n\n    if (ctx) {\n      ctx.beginPath();\n      ctx.moveTo(x0, y0);\n      ctx.lineTo(x1, y1);\n    }\n\n    return new BoundingBox(x0, y0, x1, y1);\n  }\n\n  getMarkers() {\n    var [p0, p1] = this.getPoints();\n    var a = p0.angleTo(p1);\n    return [[p0, a], [p1, a]];\n  }\n\n}\n\nclass PolylineElement extends PathElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'polyline';\n    this.points = [];\n    this.points = Point.parsePath(this.getAttribute('points').getString());\n  }\n\n  path(ctx) {\n    var {\n      points\n    } = this;\n    var [{\n      x: x0,\n      y: y0\n    }] = points;\n    var boundingBox = new BoundingBox(x0, y0);\n\n    if (ctx) {\n      ctx.beginPath();\n      ctx.moveTo(x0, y0);\n    }\n\n    points.forEach(_ref => {\n      var {\n        x,\n        y\n      } = _ref;\n      boundingBox.addPoint(x, y);\n\n      if (ctx) {\n        ctx.lineTo(x, y);\n      }\n    });\n    return boundingBox;\n  }\n\n  getMarkers() {\n    var {\n      points\n    } = this;\n    var lastIndex = points.length - 1;\n    var markers = [];\n    points.forEach((point, i) => {\n      if (i === lastIndex) {\n        return;\n      }\n\n      markers.push([point, point.angleTo(points[i + 1])]);\n    });\n\n    if (markers.length > 0) {\n      markers.push([points[points.length - 1], markers[markers.length - 1][1]]);\n    }\n\n    return markers;\n  }\n\n}\n\nclass PolygonElement extends PolylineElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'polygon';\n  }\n\n  path(ctx) {\n    var boundingBox = super.path(ctx);\n    var [{\n      x,\n      y\n    }] = this.points;\n\n    if (ctx) {\n      ctx.lineTo(x, y);\n      ctx.closePath();\n    }\n\n    return boundingBox;\n  }\n\n}\n\nclass PatternElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'pattern';\n  }\n\n  createPattern(ctx, _, parentOpacityProp) {\n    var width = this.getStyle('width').getPixels('x', true);\n    var height = this.getStyle('height').getPixels('y', true); // render me using a temporary svg element\n\n    var patternSvg = new SVGElement(this.document, null);\n    patternSvg.attributes.viewBox = new Property(this.document, 'viewBox', this.getAttribute('viewBox').getValue());\n    patternSvg.attributes.width = new Property(this.document, 'width', \"\".concat(width, \"px\"));\n    patternSvg.attributes.height = new Property(this.document, 'height', \"\".concat(height, \"px\"));\n    patternSvg.attributes.transform = new Property(this.document, 'transform', this.getAttribute('patternTransform').getValue());\n    patternSvg.children = this.children;\n    var patternCanvas = this.document.createCanvas(width, height);\n    var patternCtx = patternCanvas.getContext('2d');\n    var xAttr = this.getAttribute('x');\n    var yAttr = this.getAttribute('y');\n\n    if (xAttr.hasValue() && yAttr.hasValue()) {\n      patternCtx.translate(xAttr.getPixels('x', true), yAttr.getPixels('y', true));\n    }\n\n    if (parentOpacityProp.hasValue()) {\n      this.styles['fill-opacity'] = parentOpacityProp;\n    } else {\n      Reflect.deleteProperty(this.styles, 'fill-opacity');\n    } // render 3x3 grid so when we transform there's no white space on edges\n\n\n    for (var x = -1; x <= 1; x++) {\n      for (var y = -1; y <= 1; y++) {\n        patternCtx.save();\n        patternSvg.attributes.x = new Property(this.document, 'x', x * patternCanvas.width);\n        patternSvg.attributes.y = new Property(this.document, 'y', y * patternCanvas.height);\n        patternSvg.render(patternCtx);\n        patternCtx.restore();\n      }\n    }\n\n    var pattern = ctx.createPattern(patternCanvas, 'repeat');\n    return pattern;\n  }\n\n}\n\nclass MarkerElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'marker';\n  }\n\n  render(ctx, point, angle) {\n    if (!point) {\n      return;\n    }\n\n    var {\n      x,\n      y\n    } = point;\n    var orient = this.getAttribute('orient').getString('auto');\n    var markerUnits = this.getAttribute('markerUnits').getString('strokeWidth');\n    ctx.translate(x, y);\n\n    if (orient === 'auto') {\n      ctx.rotate(angle);\n    }\n\n    if (markerUnits === 'strokeWidth') {\n      ctx.scale(ctx.lineWidth, ctx.lineWidth);\n    }\n\n    ctx.save(); // render me using a temporary svg element\n\n    var markerSvg = new SVGElement(this.document, null);\n    markerSvg.type = this.type;\n    markerSvg.attributes.viewBox = new Property(this.document, 'viewBox', this.getAttribute('viewBox').getValue());\n    markerSvg.attributes.refX = new Property(this.document, 'refX', this.getAttribute('refX').getValue());\n    markerSvg.attributes.refY = new Property(this.document, 'refY', this.getAttribute('refY').getValue());\n    markerSvg.attributes.width = new Property(this.document, 'width', this.getAttribute('markerWidth').getValue());\n    markerSvg.attributes.height = new Property(this.document, 'height', this.getAttribute('markerHeight').getValue());\n    markerSvg.attributes.overflow = new Property(this.document, 'overflow', this.getAttribute('overflow').getValue());\n    markerSvg.attributes.fill = new Property(this.document, 'fill', this.getAttribute('fill').getColor('black'));\n    markerSvg.attributes.stroke = new Property(this.document, 'stroke', this.getAttribute('stroke').getValue('none'));\n    markerSvg.children = this.children;\n    markerSvg.render(ctx);\n    ctx.restore();\n\n    if (markerUnits === 'strokeWidth') {\n      ctx.scale(1 / ctx.lineWidth, 1 / ctx.lineWidth);\n    }\n\n    if (orient === 'auto') {\n      ctx.rotate(-angle);\n    }\n\n    ctx.translate(-x, -y);\n  }\n\n}\n\nclass DefsElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'defs';\n  }\n\n  render() {// NOOP\n  }\n\n}\n\nclass GElement extends RenderedElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'g';\n  }\n\n  getBoundingBox(ctx) {\n    var boundingBox = new BoundingBox();\n    this.children.forEach(child => {\n      boundingBox.addBoundingBox(child.getBoundingBox(ctx));\n    });\n    return boundingBox;\n  }\n\n}\n\nclass GradientElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.attributesToInherit = ['gradientUnits'];\n    this.stops = [];\n    var {\n      stops,\n      children\n    } = this;\n    children.forEach(child => {\n      if (child.type === 'stop') {\n        stops.push(child);\n      }\n    });\n  }\n\n  getGradientUnits() {\n    return this.getAttribute('gradientUnits').getString('objectBoundingBox');\n  }\n\n  createGradient(ctx, element, parentOpacityProp) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias, consistent-this\n    var stopsContainer = this;\n\n    if (this.getHrefAttribute().hasValue()) {\n      stopsContainer = this.getHrefAttribute().getDefinition();\n      this.inheritStopContainer(stopsContainer);\n    }\n\n    var {\n      stops\n    } = stopsContainer;\n    var gradient = this.getGradient(ctx, element);\n\n    if (!gradient) {\n      return this.addParentOpacity(parentOpacityProp, stops[stops.length - 1].color);\n    }\n\n    stops.forEach(stop => {\n      gradient.addColorStop(stop.offset, this.addParentOpacity(parentOpacityProp, stop.color));\n    });\n\n    if (this.getAttribute('gradientTransform').hasValue()) {\n      // render as transformed pattern on temporary canvas\n      var {\n        document\n      } = this;\n      var {\n        MAX_VIRTUAL_PIXELS,\n        viewPort\n      } = document.screen;\n      var [rootView] = viewPort.viewPorts;\n      var rect = new RectElement(document, null);\n      rect.attributes.x = new Property(document, 'x', -MAX_VIRTUAL_PIXELS / 3.0);\n      rect.attributes.y = new Property(document, 'y', -MAX_VIRTUAL_PIXELS / 3.0);\n      rect.attributes.width = new Property(document, 'width', MAX_VIRTUAL_PIXELS);\n      rect.attributes.height = new Property(document, 'height', MAX_VIRTUAL_PIXELS);\n      var group = new GElement(document, null);\n      group.attributes.transform = new Property(document, 'transform', this.getAttribute('gradientTransform').getValue());\n      group.children = [rect];\n      var patternSvg = new SVGElement(document, null);\n      patternSvg.attributes.x = new Property(document, 'x', 0);\n      patternSvg.attributes.y = new Property(document, 'y', 0);\n      patternSvg.attributes.width = new Property(document, 'width', rootView.width);\n      patternSvg.attributes.height = new Property(document, 'height', rootView.height);\n      patternSvg.children = [group];\n      var patternCanvas = document.createCanvas(rootView.width, rootView.height);\n      var patternCtx = patternCanvas.getContext('2d');\n      patternCtx.fillStyle = gradient;\n      patternSvg.render(patternCtx);\n      return patternCtx.createPattern(patternCanvas, 'no-repeat');\n    }\n\n    return gradient;\n  }\n\n  inheritStopContainer(stopsContainer) {\n    this.attributesToInherit.forEach(attributeToInherit => {\n      if (!this.getAttribute(attributeToInherit).hasValue() && stopsContainer.getAttribute(attributeToInherit).hasValue()) {\n        this.getAttribute(attributeToInherit, true).setValue(stopsContainer.getAttribute(attributeToInherit).getValue());\n      }\n    });\n  }\n\n  addParentOpacity(parentOpacityProp, color) {\n    if (parentOpacityProp.hasValue()) {\n      var colorProp = new Property(this.document, 'color', color);\n      return colorProp.addOpacity(parentOpacityProp).getColor();\n    }\n\n    return color;\n  }\n\n}\n\nclass LinearGradientElement extends GradientElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'linearGradient';\n    this.attributesToInherit.push('x1', 'y1', 'x2', 'y2');\n  }\n\n  getGradient(ctx, element) {\n    var isBoundingBoxUnits = this.getGradientUnits() === 'objectBoundingBox';\n    var boundingBox = isBoundingBoxUnits ? element.getBoundingBox(ctx) : null;\n\n    if (isBoundingBoxUnits && !boundingBox) {\n      return null;\n    }\n\n    if (!this.getAttribute('x1').hasValue() && !this.getAttribute('y1').hasValue() && !this.getAttribute('x2').hasValue() && !this.getAttribute('y2').hasValue()) {\n      this.getAttribute('x1', true).setValue(0);\n      this.getAttribute('y1', true).setValue(0);\n      this.getAttribute('x2', true).setValue(1);\n      this.getAttribute('y2', true).setValue(0);\n    }\n\n    var x1 = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('x1').getNumber() : this.getAttribute('x1').getPixels('x');\n    var y1 = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('y1').getNumber() : this.getAttribute('y1').getPixels('y');\n    var x2 = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('x2').getNumber() : this.getAttribute('x2').getPixels('x');\n    var y2 = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('y2').getNumber() : this.getAttribute('y2').getPixels('y');\n\n    if (x1 === x2 && y1 === y2) {\n      return null;\n    }\n\n    return ctx.createLinearGradient(x1, y1, x2, y2);\n  }\n\n}\n\nclass RadialGradientElement extends GradientElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'radialGradient';\n    this.attributesToInherit.push('cx', 'cy', 'r', 'fx', 'fy', 'fr');\n  }\n\n  getGradient(ctx, element) {\n    var isBoundingBoxUnits = this.getGradientUnits() === 'objectBoundingBox';\n    var boundingBox = element.getBoundingBox(ctx);\n\n    if (isBoundingBoxUnits && !boundingBox) {\n      return null;\n    }\n\n    if (!this.getAttribute('cx').hasValue()) {\n      this.getAttribute('cx', true).setValue('50%');\n    }\n\n    if (!this.getAttribute('cy').hasValue()) {\n      this.getAttribute('cy', true).setValue('50%');\n    }\n\n    if (!this.getAttribute('r').hasValue()) {\n      this.getAttribute('r', true).setValue('50%');\n    }\n\n    var cx = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('cx').getNumber() : this.getAttribute('cx').getPixels('x');\n    var cy = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('cy').getNumber() : this.getAttribute('cy').getPixels('y');\n    var fx = cx;\n    var fy = cy;\n\n    if (this.getAttribute('fx').hasValue()) {\n      fx = isBoundingBoxUnits ? boundingBox.x + boundingBox.width * this.getAttribute('fx').getNumber() : this.getAttribute('fx').getPixels('x');\n    }\n\n    if (this.getAttribute('fy').hasValue()) {\n      fy = isBoundingBoxUnits ? boundingBox.y + boundingBox.height * this.getAttribute('fy').getNumber() : this.getAttribute('fy').getPixels('y');\n    }\n\n    var r = isBoundingBoxUnits ? (boundingBox.width + boundingBox.height) / 2.0 * this.getAttribute('r').getNumber() : this.getAttribute('r').getPixels();\n    var fr = this.getAttribute('fr').getPixels();\n    return ctx.createRadialGradient(fx, fy, fr, cx, cy, r);\n  }\n\n}\n\nclass StopElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'stop';\n    var offset = Math.max(0, Math.min(1, this.getAttribute('offset').getNumber()));\n    var stopOpacity = this.getStyle('stop-opacity');\n    var stopColor = this.getStyle('stop-color', true);\n\n    if (stopColor.getString() === '') {\n      stopColor.setValue('#000');\n    }\n\n    if (stopOpacity.hasValue()) {\n      stopColor = stopColor.addOpacity(stopOpacity);\n    }\n\n    this.offset = offset;\n    this.color = stopColor.getColor();\n  }\n\n}\n\nclass AnimateElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'animate';\n    this.duration = 0;\n    this.initialValue = null;\n    this.initialUnits = '';\n    this.removed = false;\n    this.frozen = false;\n    document.screen.animations.push(this);\n    this.begin = this.getAttribute('begin').getMilliseconds();\n    this.maxDuration = this.begin + this.getAttribute('dur').getMilliseconds();\n    this.from = this.getAttribute('from');\n    this.to = this.getAttribute('to');\n    this.values = new Property(document, 'values', null);\n    var valuesAttr = this.getAttribute('values');\n\n    if (valuesAttr.hasValue()) {\n      this.values.setValue(valuesAttr.getString().split(';'));\n    }\n  }\n\n  getProperty() {\n    var attributeType = this.getAttribute('attributeType').getString();\n    var attributeName = this.getAttribute('attributeName').getString();\n\n    if (attributeType === 'CSS') {\n      return this.parent.getStyle(attributeName, true);\n    }\n\n    return this.parent.getAttribute(attributeName, true);\n  }\n\n  calcValue() {\n    var {\n      initialUnits\n    } = this;\n    var {\n      progress,\n      from,\n      to\n    } = this.getProgress(); // tween value linearly\n\n    var newValue = from.getNumber() + (to.getNumber() - from.getNumber()) * progress;\n\n    if (initialUnits === '%') {\n      newValue *= 100.0; // numValue() returns 0-1 whereas properties are 0-100\n    }\n\n    return \"\".concat(newValue).concat(initialUnits);\n  }\n\n  update(delta) {\n    var {\n      parent\n    } = this;\n    var prop = this.getProperty(); // set initial value\n\n    if (!this.initialValue) {\n      this.initialValue = prop.getString();\n      this.initialUnits = prop.getUnits();\n    } // if we're past the end time\n\n\n    if (this.duration > this.maxDuration) {\n      var fill = this.getAttribute('fill').getString('remove'); // loop for indefinitely repeating animations\n\n      if (this.getAttribute('repeatCount').getString() === 'indefinite' || this.getAttribute('repeatDur').getString() === 'indefinite') {\n        this.duration = 0;\n      } else if (fill === 'freeze' && !this.frozen) {\n        this.frozen = true;\n        parent.animationFrozen = true;\n        parent.animationFrozenValue = prop.getString();\n      } else if (fill === 'remove' && !this.removed) {\n        this.removed = true;\n        prop.setValue(parent.animationFrozen ? parent.animationFrozenValue : this.initialValue);\n        return true;\n      }\n\n      return false;\n    }\n\n    this.duration += delta; // if we're past the begin time\n\n    var updated = false;\n\n    if (this.begin < this.duration) {\n      var newValue = this.calcValue(); // tween\n\n      var typeAttr = this.getAttribute('type');\n\n      if (typeAttr.hasValue()) {\n        // for transform, etc.\n        var type = typeAttr.getString();\n        newValue = \"\".concat(type, \"(\").concat(newValue, \")\");\n      }\n\n      prop.setValue(newValue);\n      updated = true;\n    }\n\n    return updated;\n  }\n\n  getProgress() {\n    var {\n      document,\n      values\n    } = this;\n    var result = {\n      progress: (this.duration - this.begin) / (this.maxDuration - this.begin)\n    };\n\n    if (values.hasValue()) {\n      var p = result.progress * (values.getValue().length - 1);\n      var lb = Math.floor(p);\n      var ub = Math.ceil(p);\n      result.from = new Property(document, 'from', parseFloat(values.getValue()[lb]));\n      result.to = new Property(document, 'to', parseFloat(values.getValue()[ub]));\n      result.progress = (p - lb) / (ub - lb);\n    } else {\n      result.from = this.from;\n      result.to = this.to;\n    }\n\n    return result;\n  }\n\n}\n\nclass AnimateColorElement extends AnimateElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'animateColor';\n  }\n\n  calcValue() {\n    var {\n      progress,\n      from,\n      to\n    } = this.getProgress();\n    var colorFrom = new RGBColor(from.getColor());\n    var colorTo = new RGBColor(to.getColor());\n\n    if (colorFrom.ok && colorTo.ok) {\n      // tween color linearly\n      var r = colorFrom.r + (colorTo.r - colorFrom.r) * progress;\n      var g = colorFrom.g + (colorTo.g - colorFrom.g) * progress;\n      var b = colorFrom.b + (colorTo.b - colorFrom.b) * progress; // ? alpha\n\n      return \"rgb(\".concat(Math.floor(r), \", \").concat(Math.floor(g), \", \").concat(Math.floor(b), \")\");\n    }\n\n    return this.getAttribute('from').getColor();\n  }\n\n}\n\nclass AnimateTransformElement extends AnimateElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'animateTransform';\n  }\n\n  calcValue() {\n    var {\n      progress,\n      from,\n      to\n    } = this.getProgress(); // tween value linearly\n\n    var transformFrom = toNumbers(from.getString());\n    var transformTo = toNumbers(to.getString());\n    var newValue = transformFrom.map((from, i) => {\n      var to = transformTo[i];\n      return from + (to - from) * progress;\n    }).join(' ');\n    return newValue;\n  }\n\n}\n\nclass FontElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'font';\n    this.glyphs = {};\n    this.horizAdvX = this.getAttribute('horiz-adv-x').getNumber();\n    var {\n      definitions\n    } = document;\n    var {\n      children\n    } = this;\n\n    for (var child of children) {\n      switch (child.type) {\n        case 'font-face':\n          {\n            this.fontFace = child;\n            var fontFamilyStyle = child.getStyle('font-family');\n\n            if (fontFamilyStyle.hasValue()) {\n              definitions[fontFamilyStyle.getString()] = this;\n            }\n\n            break;\n          }\n\n        case 'missing-glyph':\n          this.missingGlyph = child;\n          break;\n\n        case 'glyph':\n          {\n            var glyph = child;\n\n            if (glyph.arabicForm) {\n              this.isRTL = true;\n              this.isArabic = true;\n\n              if (typeof this.glyphs[glyph.unicode] === 'undefined') {\n                this.glyphs[glyph.unicode] = {};\n              }\n\n              this.glyphs[glyph.unicode][glyph.arabicForm] = glyph;\n            } else {\n              this.glyphs[glyph.unicode] = glyph;\n            }\n\n            break;\n          }\n      }\n    }\n  }\n\n  render() {// NO RENDER\n  }\n\n}\n\nclass FontFaceElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'font-face';\n    this.ascent = this.getAttribute('ascent').getNumber();\n    this.descent = this.getAttribute('descent').getNumber();\n    this.unitsPerEm = this.getAttribute('units-per-em').getNumber();\n  }\n\n}\n\nclass MissingGlyphElement extends PathElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'missing-glyph';\n    this.horizAdvX = 0;\n  }\n\n}\n\nclass TRefElement extends TextElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'tref';\n  }\n\n  getText() {\n    var element = this.getHrefAttribute().getDefinition();\n\n    if (element) {\n      var firstChild = element.children[0];\n\n      if (firstChild) {\n        return firstChild.getText();\n      }\n    }\n\n    return '';\n  }\n\n}\n\nclass AElement extends TextElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'a';\n    var {\n      childNodes\n    } = node;\n    var firstChild = childNodes[0];\n    var hasText = childNodes.length > 0 && Array.from(childNodes).every(node => node.nodeType === 3);\n    this.hasText = hasText;\n    this.text = hasText ? this.getTextFromNode(firstChild) : '';\n  }\n\n  getText() {\n    return this.text;\n  }\n\n  renderChildren(ctx) {\n    if (this.hasText) {\n      // render as text element\n      super.renderChildren(ctx);\n      var {\n        document,\n        x,\n        y\n      } = this;\n      var {\n        mouse\n      } = document.screen;\n      var fontSize = new Property(document, 'fontSize', Font.parse(document.ctx.font).fontSize); // Do not calc bounding box if mouse is not working.\n\n      if (mouse.isWorking()) {\n        mouse.checkBoundingBox(this, new BoundingBox(x, y - fontSize.getPixels('y'), x + this.measureText(ctx), y));\n      }\n    } else if (this.children.length > 0) {\n      // render as temporary group\n      var g = new GElement(this.document, null);\n      g.children = this.children;\n      g.parent = this;\n      g.render(ctx);\n    }\n  }\n\n  onClick() {\n    var {\n      window\n    } = this.document;\n\n    if (window) {\n      window.open(this.getHrefAttribute().getString());\n    }\n  }\n\n  onMouseMove() {\n    var ctx = this.document.ctx;\n    ctx.canvas.style.cursor = 'pointer';\n  }\n\n}\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$2(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nclass TextPathElement extends TextElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'textPath';\n    this.textWidth = 0;\n    this.textHeight = 0;\n    this.pathLength = -1;\n    this.glyphInfo = null;\n    this.letterSpacingCache = [];\n    this.measuresCache = new Map([['', 0]]);\n    var pathElement = this.getHrefAttribute().getDefinition();\n    this.text = this.getTextFromNode();\n    this.dataArray = this.parsePathData(pathElement);\n  }\n\n  getText() {\n    return this.text;\n  }\n\n  path(ctx) {\n    var {\n      dataArray\n    } = this;\n\n    if (ctx) {\n      ctx.beginPath();\n    }\n\n    dataArray.forEach(_ref => {\n      var {\n        type,\n        points\n      } = _ref;\n\n      switch (type) {\n        case PathParser.LINE_TO:\n          if (ctx) {\n            ctx.lineTo(points[0], points[1]);\n          }\n\n          break;\n\n        case PathParser.MOVE_TO:\n          if (ctx) {\n            ctx.moveTo(points[0], points[1]);\n          }\n\n          break;\n\n        case PathParser.CURVE_TO:\n          if (ctx) {\n            ctx.bezierCurveTo(points[0], points[1], points[2], points[3], points[4], points[5]);\n          }\n\n          break;\n\n        case PathParser.QUAD_TO:\n          if (ctx) {\n            ctx.quadraticCurveTo(points[0], points[1], points[2], points[3]);\n          }\n\n          break;\n\n        case PathParser.ARC:\n          {\n            var [cx, cy, rx, ry, theta, dTheta, psi, fs] = points;\n            var r = rx > ry ? rx : ry;\n            var scaleX = rx > ry ? 1 : rx / ry;\n            var scaleY = rx > ry ? ry / rx : 1;\n\n            if (ctx) {\n              ctx.translate(cx, cy);\n              ctx.rotate(psi);\n              ctx.scale(scaleX, scaleY);\n              ctx.arc(0, 0, r, theta, theta + dTheta, Boolean(1 - fs));\n              ctx.scale(1 / scaleX, 1 / scaleY);\n              ctx.rotate(-psi);\n              ctx.translate(-cx, -cy);\n            }\n\n            break;\n          }\n\n        case PathParser.CLOSE_PATH:\n          if (ctx) {\n            ctx.closePath();\n          }\n\n          break;\n      }\n    });\n  }\n\n  renderChildren(ctx) {\n    this.setTextData(ctx);\n    ctx.save();\n    var textDecoration = this.parent.getStyle('text-decoration').getString();\n    var fontSize = this.getFontSize();\n    var {\n      glyphInfo\n    } = this;\n    var fill = ctx.fillStyle;\n\n    if (textDecoration === 'underline') {\n      ctx.beginPath();\n    }\n\n    glyphInfo.forEach((glyph, i) => {\n      var {\n        p0,\n        p1,\n        rotation,\n        text: partialText\n      } = glyph;\n      ctx.save();\n      ctx.translate(p0.x, p0.y);\n      ctx.rotate(rotation);\n\n      if (ctx.fillStyle) {\n        ctx.fillText(partialText, 0, 0);\n      }\n\n      if (ctx.strokeStyle) {\n        ctx.strokeText(partialText, 0, 0);\n      }\n\n      ctx.restore();\n\n      if (textDecoration === 'underline') {\n        if (i === 0) {\n          ctx.moveTo(p0.x, p0.y + fontSize / 8);\n        }\n\n        ctx.lineTo(p1.x, p1.y + fontSize / 5);\n      } // // To assist with debugging visually, uncomment following\n      //\n      // ctx.beginPath();\n      // if (i % 2)\n      // \tctx.strokeStyle = 'red';\n      // else\n      // \tctx.strokeStyle = 'green';\n      // ctx.moveTo(p0.x, p0.y);\n      // ctx.lineTo(p1.x, p1.y);\n      // ctx.stroke();\n      // ctx.closePath();\n\n    });\n\n    if (textDecoration === 'underline') {\n      ctx.lineWidth = fontSize / 20;\n      ctx.strokeStyle = fill;\n      ctx.stroke();\n      ctx.closePath();\n    }\n\n    ctx.restore();\n  }\n\n  getLetterSpacingAt() {\n    var idx = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    return this.letterSpacingCache[idx] || 0;\n  }\n\n  findSegmentToFitChar(ctx, anchor, textFullWidth, fullPathWidth, spacesNumber, inputOffset, dy, c, charI) {\n    var offset = inputOffset;\n    var glyphWidth = this.measureText(ctx, c);\n\n    if (c === ' ' && anchor === 'justify' && textFullWidth < fullPathWidth) {\n      glyphWidth += (fullPathWidth - textFullWidth) / spacesNumber;\n    }\n\n    if (charI > -1) {\n      offset += this.getLetterSpacingAt(charI);\n    }\n\n    var splineStep = this.textHeight / 20;\n    var p0 = this.getEquidistantPointOnPath(offset, splineStep, 0);\n    var p1 = this.getEquidistantPointOnPath(offset + glyphWidth, splineStep, 0);\n    var segment = {\n      p0,\n      p1\n    };\n    var rotation = p0 && p1 ? Math.atan2(p1.y - p0.y, p1.x - p0.x) : 0;\n\n    if (dy) {\n      var dyX = Math.cos(Math.PI / 2 + rotation) * dy;\n      var dyY = Math.cos(-rotation) * dy;\n      segment.p0 = _objectSpread$2(_objectSpread$2({}, p0), {}, {\n        x: p0.x + dyX,\n        y: p0.y + dyY\n      });\n      segment.p1 = _objectSpread$2(_objectSpread$2({}, p1), {}, {\n        x: p1.x + dyX,\n        y: p1.y + dyY\n      });\n    }\n\n    offset += glyphWidth;\n    return {\n      offset,\n      segment,\n      rotation\n    };\n  }\n\n  measureText(ctx, text) {\n    var {\n      measuresCache\n    } = this;\n    var targetText = text || this.getText();\n\n    if (measuresCache.has(targetText)) {\n      return measuresCache.get(targetText);\n    }\n\n    var measure = this.measureTargetText(ctx, targetText);\n    measuresCache.set(targetText, measure);\n    return measure;\n  } // This method supposes what all custom fonts already loaded.\n  // If some font will be loaded after this method call, <textPath> will not be rendered correctly.\n  // You need to call this method manually to update glyphs cache.\n\n\n  setTextData(ctx) {\n    if (this.glyphInfo) {\n      return;\n    }\n\n    var renderText = this.getText();\n    var chars = renderText.split('');\n    var spacesNumber = renderText.split(' ').length - 1;\n    var dx = this.parent.getAttribute('dx').split().map(_ => _.getPixels('x'));\n    var dy = this.parent.getAttribute('dy').getPixels('y');\n    var anchor = this.parent.getStyle('text-anchor').getString('start');\n    var thisSpacing = this.getStyle('letter-spacing');\n    var parentSpacing = this.parent.getStyle('letter-spacing');\n    var letterSpacing = 0;\n\n    if (!thisSpacing.hasValue() || thisSpacing.getValue() === 'inherit') {\n      letterSpacing = parentSpacing.getPixels();\n    } else if (thisSpacing.hasValue()) {\n      if (thisSpacing.getValue() !== 'initial' && thisSpacing.getValue() !== 'unset') {\n        letterSpacing = thisSpacing.getPixels();\n      }\n    } // fill letter-spacing cache\n\n\n    var letterSpacingCache = [];\n    var textLen = renderText.length;\n    this.letterSpacingCache = letterSpacingCache;\n\n    for (var i = 0; i < textLen; i++) {\n      letterSpacingCache.push(typeof dx[i] !== 'undefined' ? dx[i] : letterSpacing);\n    }\n\n    var dxSum = letterSpacingCache.reduce((acc, cur, i) => i === 0 ? 0 : acc + cur || 0, 0);\n    var textWidth = this.measureText(ctx);\n    var textFullWidth = Math.max(textWidth + dxSum, 0);\n    this.textWidth = textWidth;\n    this.textHeight = this.getFontSize();\n    this.glyphInfo = [];\n    var fullPathWidth = this.getPathLength();\n    var startOffset = this.getStyle('startOffset').getNumber(0) * fullPathWidth;\n    var offset = 0;\n\n    if (anchor === 'middle' || anchor === 'center') {\n      offset = -textFullWidth / 2;\n    }\n\n    if (anchor === 'end' || anchor === 'right') {\n      offset = -textFullWidth;\n    }\n\n    offset += startOffset;\n    chars.forEach((char, i) => {\n      // Find such segment what distance between p0 and p1 is approx. width of glyph\n      var {\n        offset: nextOffset,\n        segment,\n        rotation\n      } = this.findSegmentToFitChar(ctx, anchor, textFullWidth, fullPathWidth, spacesNumber, offset, dy, char, i);\n      offset = nextOffset;\n\n      if (!segment.p0 || !segment.p1) {\n        return;\n      } // const width = this.getLineLength(\n      // \tsegment.p0.x,\n      // \tsegment.p0.y,\n      // \tsegment.p1.x,\n      // \tsegment.p1.y\n      // );\n      // Note: Since glyphs are rendered one at a time, any kerning pair data built into the font will not be used.\n      // Can foresee having a rough pair table built in that the developer can override as needed.\n      // Or use \"dx\" attribute of the <text> node as a naive replacement\n      // const kern = 0;\n      // placeholder for future implementation\n      // const midpoint = this.getPointOnLine(\n      // \tkern + width / 2.0,\n      // \tsegment.p0.x, segment.p0.y, segment.p1.x, segment.p1.y\n      // );\n\n\n      this.glyphInfo.push({\n        // transposeX: midpoint.x,\n        // transposeY: midpoint.y,\n        text: chars[i],\n        p0: segment.p0,\n        p1: segment.p1,\n        rotation\n      });\n    });\n  }\n\n  parsePathData(path) {\n    this.pathLength = -1; // reset path length\n\n    if (!path) {\n      return [];\n    }\n\n    var pathCommands = [];\n    var {\n      pathParser\n    } = path;\n    pathParser.reset(); // convert l, H, h, V, and v to L\n\n    while (!pathParser.isEnd()) {\n      var {\n        current\n      } = pathParser;\n      var startX = current ? current.x : 0;\n      var startY = current ? current.y : 0;\n      var command = pathParser.next();\n      var nextCommandType = command.type;\n      var points = [];\n\n      switch (command.type) {\n        case PathParser.MOVE_TO:\n          this.pathM(pathParser, points);\n          break;\n\n        case PathParser.LINE_TO:\n          nextCommandType = this.pathL(pathParser, points);\n          break;\n\n        case PathParser.HORIZ_LINE_TO:\n          nextCommandType = this.pathH(pathParser, points);\n          break;\n\n        case PathParser.VERT_LINE_TO:\n          nextCommandType = this.pathV(pathParser, points);\n          break;\n\n        case PathParser.CURVE_TO:\n          this.pathC(pathParser, points);\n          break;\n\n        case PathParser.SMOOTH_CURVE_TO:\n          nextCommandType = this.pathS(pathParser, points);\n          break;\n\n        case PathParser.QUAD_TO:\n          this.pathQ(pathParser, points);\n          break;\n\n        case PathParser.SMOOTH_QUAD_TO:\n          nextCommandType = this.pathT(pathParser, points);\n          break;\n\n        case PathParser.ARC:\n          points = this.pathA(pathParser);\n          break;\n\n        case PathParser.CLOSE_PATH:\n          PathElement.pathZ(pathParser);\n          break;\n      }\n\n      if (command.type !== PathParser.CLOSE_PATH) {\n        pathCommands.push({\n          type: nextCommandType,\n          points,\n          start: {\n            x: startX,\n            y: startY\n          },\n          pathLength: this.calcLength(startX, startY, nextCommandType, points)\n        });\n      } else {\n        pathCommands.push({\n          type: PathParser.CLOSE_PATH,\n          points: [],\n          pathLength: 0\n        });\n      }\n    }\n\n    return pathCommands;\n  }\n\n  pathM(pathParser, points) {\n    var {\n      x,\n      y\n    } = PathElement.pathM(pathParser).point;\n    points.push(x, y);\n  }\n\n  pathL(pathParser, points) {\n    var {\n      x,\n      y\n    } = PathElement.pathL(pathParser).point;\n    points.push(x, y);\n    return PathParser.LINE_TO;\n  }\n\n  pathH(pathParser, points) {\n    var {\n      x,\n      y\n    } = PathElement.pathH(pathParser).point;\n    points.push(x, y);\n    return PathParser.LINE_TO;\n  }\n\n  pathV(pathParser, points) {\n    var {\n      x,\n      y\n    } = PathElement.pathV(pathParser).point;\n    points.push(x, y);\n    return PathParser.LINE_TO;\n  }\n\n  pathC(pathParser, points) {\n    var {\n      point,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathC(pathParser);\n    points.push(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n  }\n\n  pathS(pathParser, points) {\n    var {\n      point,\n      controlPoint,\n      currentPoint\n    } = PathElement.pathS(pathParser);\n    points.push(point.x, point.y, controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    return PathParser.CURVE_TO;\n  }\n\n  pathQ(pathParser, points) {\n    var {\n      controlPoint,\n      currentPoint\n    } = PathElement.pathQ(pathParser);\n    points.push(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n  }\n\n  pathT(pathParser, points) {\n    var {\n      controlPoint,\n      currentPoint\n    } = PathElement.pathT(pathParser);\n    points.push(controlPoint.x, controlPoint.y, currentPoint.x, currentPoint.y);\n    return PathParser.QUAD_TO;\n  }\n\n  pathA(pathParser) {\n    var {\n      rX,\n      rY,\n      sweepFlag,\n      xAxisRotation,\n      centp,\n      a1,\n      ad\n    } = PathElement.pathA(pathParser);\n\n    if (sweepFlag === 0 && ad > 0) {\n      ad -= 2 * Math.PI;\n    }\n\n    if (sweepFlag === 1 && ad < 0) {\n      ad += 2 * Math.PI;\n    }\n\n    return [centp.x, centp.y, rX, rY, a1, ad, xAxisRotation, sweepFlag];\n  }\n\n  calcLength(x, y, commandType, points) {\n    var len = 0;\n    var p1 = null;\n    var p2 = null;\n    var t = 0;\n\n    switch (commandType) {\n      case PathParser.LINE_TO:\n        return this.getLineLength(x, y, points[0], points[1]);\n\n      case PathParser.CURVE_TO:\n        // Approximates by breaking curve into 100 line segments\n        len = 0.0;\n        p1 = this.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = this.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n          len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          p1 = p2;\n        }\n\n        return len;\n\n      case PathParser.QUAD_TO:\n        // Approximates by breaking curve into 100 line segments\n        len = 0.0;\n        p1 = this.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n\n        for (t = 0.01; t <= 1; t += 0.01) {\n          p2 = this.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n          len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          p1 = p2;\n        }\n\n        return len;\n\n      case PathParser.ARC:\n        {\n          // Approximates by breaking curve into line segments\n          len = 0.0;\n          var start = points[4]; // 4 = theta\n\n          var dTheta = points[5]; // 5 = dTheta\n\n          var end = points[4] + dTheta;\n          var inc = Math.PI / 180.0; // 1 degree resolution\n\n          if (Math.abs(start - end) < inc) {\n            inc = Math.abs(start - end);\n          } // Note: for purpose of calculating arc length, not going to worry about rotating X-axis by angle psi\n\n\n          p1 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n\n          if (dTheta < 0) {\n            // clockwise\n            for (t = start - inc; t > end; t -= inc) {\n              p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n              len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n              p1 = p2;\n            }\n          } else {\n            // counter-clockwise\n            for (t = start + inc; t < end; t += inc) {\n              p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n              len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n              p1 = p2;\n            }\n          }\n\n          p2 = this.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n          len += this.getLineLength(p1.x, p1.y, p2.x, p2.y);\n          return len;\n        }\n    }\n\n    return 0;\n  }\n\n  getPointOnLine(dist, p1x, p1y, p2x, p2y) {\n    var fromX = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : p1x;\n    var fromY = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : p1y;\n    var m = (p2y - p1y) / (p2x - p1x + PSEUDO_ZERO);\n    var run = Math.sqrt(dist * dist / (1 + m * m));\n\n    if (p2x < p1x) {\n      run *= -1;\n    }\n\n    var rise = m * run;\n    var pt = null;\n\n    if (p2x === p1x) {\n      // vertical line\n      pt = {\n        x: fromX,\n        y: fromY + rise\n      };\n    } else if ((fromY - p1y) / (fromX - p1x + PSEUDO_ZERO) === m) {\n      pt = {\n        x: fromX + run,\n        y: fromY + rise\n      };\n    } else {\n      var ix = 0;\n      var iy = 0;\n      var len = this.getLineLength(p1x, p1y, p2x, p2y);\n\n      if (len < PSEUDO_ZERO) {\n        return null;\n      }\n\n      var u = (fromX - p1x) * (p2x - p1x) + (fromY - p1y) * (p2y - p1y);\n      u /= len * len;\n      ix = p1x + u * (p2x - p1x);\n      iy = p1y + u * (p2y - p1y);\n      var pRise = this.getLineLength(fromX, fromY, ix, iy);\n      var pRun = Math.sqrt(dist * dist - pRise * pRise);\n      run = Math.sqrt(pRun * pRun / (1 + m * m));\n\n      if (p2x < p1x) {\n        run *= -1;\n      }\n\n      rise = m * run;\n      pt = {\n        x: ix + run,\n        y: iy + rise\n      };\n    }\n\n    return pt;\n  }\n\n  getPointOnPath(distance) {\n    var fullLen = this.getPathLength();\n    var cumulativePathLength = 0;\n    var p = null;\n\n    if (distance < -0.00005 || distance - 0.00005 > fullLen) {\n      return null;\n    }\n\n    var {\n      dataArray\n    } = this;\n\n    for (var command of dataArray) {\n      if (command && (command.pathLength < 0.00005 || cumulativePathLength + command.pathLength + 0.00005 < distance)) {\n        cumulativePathLength += command.pathLength;\n        continue;\n      }\n\n      var delta = distance - cumulativePathLength;\n      var currentT = 0;\n\n      switch (command.type) {\n        case PathParser.LINE_TO:\n          p = this.getPointOnLine(delta, command.start.x, command.start.y, command.points[0], command.points[1], command.start.x, command.start.y);\n          break;\n\n        case PathParser.ARC:\n          {\n            var start = command.points[4]; // 4 = theta\n\n            var dTheta = command.points[5]; // 5 = dTheta\n\n            var end = command.points[4] + dTheta;\n            currentT = start + delta / command.pathLength * dTheta;\n\n            if (dTheta < 0 && currentT < end || dTheta >= 0 && currentT > end) {\n              break;\n            }\n\n            p = this.getPointOnEllipticalArc(command.points[0], command.points[1], command.points[2], command.points[3], currentT, command.points[6]);\n            break;\n          }\n\n        case PathParser.CURVE_TO:\n          currentT = delta / command.pathLength;\n\n          if (currentT > 1) {\n            currentT = 1;\n          }\n\n          p = this.getPointOnCubicBezier(currentT, command.start.x, command.start.y, command.points[0], command.points[1], command.points[2], command.points[3], command.points[4], command.points[5]);\n          break;\n\n        case PathParser.QUAD_TO:\n          currentT = delta / command.pathLength;\n\n          if (currentT > 1) {\n            currentT = 1;\n          }\n\n          p = this.getPointOnQuadraticBezier(currentT, command.start.x, command.start.y, command.points[0], command.points[1], command.points[2], command.points[3]);\n          break;\n      }\n\n      if (p) {\n        return p;\n      }\n\n      break;\n    }\n\n    return null;\n  }\n\n  getLineLength(x1, y1, x2, y2) {\n    return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  }\n\n  getPathLength() {\n    if (this.pathLength === -1) {\n      this.pathLength = this.dataArray.reduce((length, command) => command.pathLength > 0 ? length + command.pathLength : length, 0);\n    }\n\n    return this.pathLength;\n  }\n\n  getPointOnCubicBezier(pct, p1x, p1y, p2x, p2y, p3x, p3y, p4x, p4y) {\n    var x = p4x * CB1(pct) + p3x * CB2(pct) + p2x * CB3(pct) + p1x * CB4(pct);\n    var y = p4y * CB1(pct) + p3y * CB2(pct) + p2y * CB3(pct) + p1y * CB4(pct);\n    return {\n      x,\n      y\n    };\n  }\n\n  getPointOnQuadraticBezier(pct, p1x, p1y, p2x, p2y, p3x, p3y) {\n    var x = p3x * QB1(pct) + p2x * QB2(pct) + p1x * QB3(pct);\n    var y = p3y * QB1(pct) + p2y * QB2(pct) + p1y * QB3(pct);\n    return {\n      x,\n      y\n    };\n  }\n\n  getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi) {\n    var cosPsi = Math.cos(psi);\n    var sinPsi = Math.sin(psi);\n    var pt = {\n      x: rx * Math.cos(theta),\n      y: ry * Math.sin(theta)\n    };\n    return {\n      x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n      y: cy + (pt.x * sinPsi + pt.y * cosPsi)\n    };\n  } // TODO need some optimisations. possibly build cache only for curved segments?\n\n\n  buildEquidistantCache(inputStep, inputPrecision) {\n    var fullLen = this.getPathLength();\n    var precision = inputPrecision || 0.25; // accuracy vs performance\n\n    var step = inputStep || fullLen / 100;\n\n    if (!this.equidistantCache || this.equidistantCache.step !== step || this.equidistantCache.precision !== precision) {\n      // Prepare cache\n      this.equidistantCache = {\n        step,\n        precision,\n        points: []\n      }; // Calculate points\n\n      var s = 0;\n\n      for (var l = 0; l <= fullLen; l += precision) {\n        var p0 = this.getPointOnPath(l);\n        var p1 = this.getPointOnPath(l + precision);\n\n        if (!p0 || !p1) {\n          continue;\n        }\n\n        s += this.getLineLength(p0.x, p0.y, p1.x, p1.y);\n\n        if (s >= step) {\n          this.equidistantCache.points.push({\n            x: p0.x,\n            y: p0.y,\n            distance: l\n          });\n          s -= step;\n        }\n      }\n    }\n  }\n\n  getEquidistantPointOnPath(targetDistance, step, precision) {\n    this.buildEquidistantCache(step, precision);\n\n    if (targetDistance < 0 || targetDistance - this.getPathLength() > 0.00005) {\n      return null;\n    }\n\n    var idx = Math.round(targetDistance / this.getPathLength() * (this.equidistantCache.points.length - 1));\n    return this.equidistantCache.points[idx] || null;\n  }\n\n}\n\nvar dataUriRegex = /^\\s*data:(([^/,;]+\\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;\nclass ImageElement extends RenderedElement {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'image';\n    this.loaded = false;\n    var href = this.getHrefAttribute().getString();\n\n    if (!href) {\n      return;\n    }\n\n    var isSvg = href.endsWith('.svg') || /^\\s*data:image\\/svg\\+xml/i.test(href);\n    document.images.push(this);\n\n    if (!isSvg) {\n      void this.loadImage(href);\n    } else {\n      void this.loadSvg(href);\n    }\n\n    this.isSvg = isSvg;\n  }\n\n  loadImage(href) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        var image = yield _this.document.createImage(href);\n        _this.image = image;\n      } catch (err) {\n        console.error(\"Error while loading image \\\"\".concat(href, \"\\\":\"), err);\n      }\n\n      _this.loaded = true;\n    })();\n  }\n\n  loadSvg(href) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var match = dataUriRegex.exec(href);\n\n      if (match) {\n        var data = match[5];\n\n        if (match[4] === 'base64') {\n          _this2.image = atob(data);\n        } else {\n          _this2.image = decodeURIComponent(data);\n        }\n      } else {\n        try {\n          var response = yield _this2.document.fetch(href);\n          var svg = yield response.text();\n          _this2.image = svg;\n        } catch (err) {\n          console.error(\"Error while loading image \\\"\".concat(href, \"\\\":\"), err);\n        }\n      }\n\n      _this2.loaded = true;\n    })();\n  }\n\n  renderChildren(ctx) {\n    var {\n      document,\n      image,\n      loaded\n    } = this;\n    var x = this.getAttribute('x').getPixels('x');\n    var y = this.getAttribute('y').getPixels('y');\n    var width = this.getStyle('width').getPixels('x');\n    var height = this.getStyle('height').getPixels('y');\n\n    if (!loaded || !image || !width || !height) {\n      return;\n    }\n\n    ctx.save();\n    ctx.translate(x, y);\n\n    if (this.isSvg) {\n      var subDocument = document.canvg.forkString(ctx, this.image, {\n        ignoreMouse: true,\n        ignoreAnimation: true,\n        ignoreDimensions: true,\n        ignoreClear: true,\n        offsetX: 0,\n        offsetY: 0,\n        scaleWidth: width,\n        scaleHeight: height\n      });\n      subDocument.document.documentElement.parent = this;\n      void subDocument.render();\n    } else {\n      var _image = this.image;\n      document.setViewBox({\n        ctx,\n        aspectRatio: this.getAttribute('preserveAspectRatio').getString(),\n        width,\n        desiredWidth: _image.width,\n        height,\n        desiredHeight: _image.height\n      });\n\n      if (this.loaded) {\n        if (typeof _image.complete === 'undefined' || _image.complete) {\n          ctx.drawImage(_image, 0, 0);\n        }\n      }\n    }\n\n    ctx.restore();\n  }\n\n  getBoundingBox() {\n    var x = this.getAttribute('x').getPixels('x');\n    var y = this.getAttribute('y').getPixels('y');\n    var width = this.getStyle('width').getPixels('x');\n    var height = this.getStyle('height').getPixels('y');\n    return new BoundingBox(x, y, x + width, y + height);\n  }\n\n}\n\nclass SymbolElement extends RenderedElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'symbol';\n  }\n\n  render(_) {// NO RENDER\n  }\n\n}\n\nclass SVGFontLoader {\n  constructor(document) {\n    this.document = document;\n    this.loaded = false;\n    document.fonts.push(this);\n  }\n\n  load(fontFamily, url) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        var {\n          document\n        } = _this;\n        var svgDocument = yield document.canvg.parser.load(url);\n        var fonts = svgDocument.getElementsByTagName('font');\n        Array.from(fonts).forEach(fontNode => {\n          var font = document.createElement(fontNode);\n          document.definitions[fontFamily] = font;\n        });\n      } catch (err) {\n        console.error(\"Error while loading font \\\"\".concat(url, \"\\\":\"), err);\n      }\n\n      _this.loaded = true;\n    })();\n  }\n\n}\n\nclass StyleElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'style';\n    var css = compressSpaces(Array.from(node.childNodes) // NEED TEST\n    .map(_ => _.textContent).join('').replace(/(\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+\\/)|(^[\\s]*\\/\\/.*)/gm, '') // remove comments\n    .replace(/@import.*;/g, '') // remove imports\n    );\n    var cssDefs = css.split('}');\n    cssDefs.forEach(_ => {\n      var def = _.trim();\n\n      if (!def) {\n        return;\n      }\n\n      var cssParts = def.split('{');\n      var cssClasses = cssParts[0].split(',');\n      var cssProps = cssParts[1].split(';');\n      cssClasses.forEach(_ => {\n        var cssClass = _.trim();\n\n        if (!cssClass) {\n          return;\n        }\n\n        var props = document.styles[cssClass] || {};\n        cssProps.forEach(cssProp => {\n          var prop = cssProp.indexOf(':');\n          var name = cssProp.substr(0, prop).trim();\n          var value = cssProp.substr(prop + 1, cssProp.length - prop).trim();\n\n          if (name && value) {\n            props[name] = new Property(document, name, value);\n          }\n        });\n        document.styles[cssClass] = props;\n        document.stylesSpecificity[cssClass] = getSelectorSpecificity(cssClass);\n\n        if (cssClass === '@font-face') {\n          //  && !nodeEnv\n          var fontFamily = props['font-family'].getString().replace(/\"|'/g, '');\n          var srcs = props.src.getString().split(',');\n          srcs.forEach(src => {\n            if (src.indexOf('format(\"svg\")') > 0) {\n              var url = parseExternalUrl(src);\n\n              if (url) {\n                void new SVGFontLoader(document).load(fontFamily, url);\n              }\n            }\n          });\n        }\n      });\n    });\n  }\n\n}\nStyleElement.parseExternalUrl = parseExternalUrl;\n\nclass UseElement extends RenderedElement {\n  constructor() {\n    super(...arguments);\n    this.type = 'use';\n  }\n\n  setContext(ctx) {\n    super.setContext(ctx);\n    var xAttr = this.getAttribute('x');\n    var yAttr = this.getAttribute('y');\n\n    if (xAttr.hasValue()) {\n      ctx.translate(xAttr.getPixels('x'), 0);\n    }\n\n    if (yAttr.hasValue()) {\n      ctx.translate(0, yAttr.getPixels('y'));\n    }\n  }\n\n  path(ctx) {\n    var {\n      element\n    } = this;\n\n    if (element) {\n      element.path(ctx);\n    }\n  }\n\n  renderChildren(ctx) {\n    var {\n      document,\n      element\n    } = this;\n\n    if (element) {\n      var tempSvg = element;\n\n      if (element.type === 'symbol') {\n        // render me using a temporary svg element in symbol cases (http://www.w3.org/TR/SVG/struct.html#UseElement)\n        tempSvg = new SVGElement(document, null);\n        tempSvg.attributes.viewBox = new Property(document, 'viewBox', element.getAttribute('viewBox').getString());\n        tempSvg.attributes.preserveAspectRatio = new Property(document, 'preserveAspectRatio', element.getAttribute('preserveAspectRatio').getString());\n        tempSvg.attributes.overflow = new Property(document, 'overflow', element.getAttribute('overflow').getString());\n        tempSvg.children = element.children; // element is still the parent of the children\n\n        element.styles.opacity = new Property(document, 'opacity', this.calculateOpacity());\n      }\n\n      if (tempSvg.type === 'svg') {\n        var widthStyle = this.getStyle('width', false, true);\n        var heightStyle = this.getStyle('height', false, true); // if symbol or svg, inherit width/height from me\n\n        if (widthStyle.hasValue()) {\n          tempSvg.attributes.width = new Property(document, 'width', widthStyle.getString());\n        }\n\n        if (heightStyle.hasValue()) {\n          tempSvg.attributes.height = new Property(document, 'height', heightStyle.getString());\n        }\n      }\n\n      var oldParent = tempSvg.parent;\n      tempSvg.parent = this;\n      tempSvg.render(ctx);\n      tempSvg.parent = oldParent;\n    }\n  }\n\n  getBoundingBox(ctx) {\n    var {\n      element\n    } = this;\n\n    if (element) {\n      return element.getBoundingBox(ctx);\n    }\n\n    return null;\n  }\n\n  elementTransform() {\n    var {\n      document,\n      element\n    } = this;\n    return Transform.fromElement(document, element);\n  }\n\n  get element() {\n    if (!this.cachedElement) {\n      this.cachedElement = this.getHrefAttribute().getDefinition();\n    }\n\n    return this.cachedElement;\n  }\n\n}\n\nfunction imGet(img, x, y, width, _height, rgba) {\n  return img[y * width * 4 + x * 4 + rgba];\n}\n\nfunction imSet(img, x, y, width, _height, rgba, val) {\n  img[y * width * 4 + x * 4 + rgba] = val;\n}\n\nfunction m(matrix, i, v) {\n  var mi = matrix[i];\n  return mi * v;\n}\n\nfunction c(a, m1, m2, m3) {\n  return m1 + Math.cos(a) * m2 + Math.sin(a) * m3;\n}\n\nclass FeColorMatrixElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'feColorMatrix';\n    var matrix = toNumbers(this.getAttribute('values').getString());\n\n    switch (this.getAttribute('type').getString('matrix')) {\n      // http://www.w3.org/TR/SVG/filters.html#feColorMatrixElement\n      case 'saturate':\n        {\n          var s = matrix[0];\n          /* eslint-disable array-element-newline */\n\n          matrix = [0.213 + 0.787 * s, 0.715 - 0.715 * s, 0.072 - 0.072 * s, 0, 0, 0.213 - 0.213 * s, 0.715 + 0.285 * s, 0.072 - 0.072 * s, 0, 0, 0.213 - 0.213 * s, 0.715 - 0.715 * s, 0.072 + 0.928 * s, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];\n          /* eslint-enable array-element-newline */\n\n          break;\n        }\n\n      case 'hueRotate':\n        {\n          var a = matrix[0] * Math.PI / 180.0;\n          /* eslint-disable array-element-newline */\n\n          matrix = [c(a, 0.213, 0.787, -0.213), c(a, 0.715, -0.715, -0.715), c(a, 0.072, -0.072, 0.928), 0, 0, c(a, 0.213, -0.213, 0.143), c(a, 0.715, 0.285, 0.140), c(a, 0.072, -0.072, -0.283), 0, 0, c(a, 0.213, -0.213, -0.787), c(a, 0.715, -0.715, 0.715), c(a, 0.072, 0.928, 0.072), 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];\n          /* eslint-enable array-element-newline */\n\n          break;\n        }\n\n      case 'luminanceToAlpha':\n        /* eslint-disable array-element-newline */\n        matrix = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2125, 0.7154, 0.0721, 0, 0, 0, 0, 0, 0, 1];\n        /* eslint-enable array-element-newline */\n\n        break;\n    }\n\n    this.matrix = matrix;\n    this.includeOpacity = this.getAttribute('includeOpacity').hasValue();\n  }\n\n  apply(ctx, _x, _y, width, height) {\n    // assuming x==0 && y==0 for now\n    var {\n      includeOpacity,\n      matrix\n    } = this;\n    var srcData = ctx.getImageData(0, 0, width, height);\n\n    for (var y = 0; y < height; y++) {\n      for (var x = 0; x < width; x++) {\n        var r = imGet(srcData.data, x, y, width, height, 0);\n        var g = imGet(srcData.data, x, y, width, height, 1);\n        var b = imGet(srcData.data, x, y, width, height, 2);\n        var a = imGet(srcData.data, x, y, width, height, 3);\n        var nr = m(matrix, 0, r) + m(matrix, 1, g) + m(matrix, 2, b) + m(matrix, 3, a) + m(matrix, 4, 1);\n        var ng = m(matrix, 5, r) + m(matrix, 6, g) + m(matrix, 7, b) + m(matrix, 8, a) + m(matrix, 9, 1);\n        var nb = m(matrix, 10, r) + m(matrix, 11, g) + m(matrix, 12, b) + m(matrix, 13, a) + m(matrix, 14, 1);\n        var na = m(matrix, 15, r) + m(matrix, 16, g) + m(matrix, 17, b) + m(matrix, 18, a) + m(matrix, 19, 1);\n\n        if (includeOpacity) {\n          nr = 0;\n          ng = 0;\n          nb = 0;\n          na *= a / 255;\n        }\n\n        imSet(srcData.data, x, y, width, height, 0, nr);\n        imSet(srcData.data, x, y, width, height, 1, ng);\n        imSet(srcData.data, x, y, width, height, 2, nb);\n        imSet(srcData.data, x, y, width, height, 3, na);\n      }\n    }\n\n    ctx.clearRect(0, 0, width, height);\n    ctx.putImageData(srcData, 0, 0);\n  }\n\n}\n\nclass MaskElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'mask';\n  }\n\n  apply(ctx, element) {\n    var {\n      document\n    } = this; // render as temp svg\n\n    var x = this.getAttribute('x').getPixels('x');\n    var y = this.getAttribute('y').getPixels('y');\n    var width = this.getStyle('width').getPixels('x');\n    var height = this.getStyle('height').getPixels('y');\n\n    if (!width && !height) {\n      var boundingBox = new BoundingBox();\n      this.children.forEach(child => {\n        boundingBox.addBoundingBox(child.getBoundingBox(ctx));\n      });\n      x = Math.floor(boundingBox.x1);\n      y = Math.floor(boundingBox.y1);\n      width = Math.floor(boundingBox.width);\n      height = Math.floor(boundingBox.height);\n    }\n\n    var ignoredStyles = this.removeStyles(element, MaskElement.ignoreStyles);\n    var maskCanvas = document.createCanvas(x + width, y + height);\n    var maskCtx = maskCanvas.getContext('2d');\n    document.screen.setDefaults(maskCtx);\n    this.renderChildren(maskCtx); // convert mask to alpha with a fake node\n    // TODO: refactor out apply from feColorMatrix\n\n    new FeColorMatrixElement(document, {\n      nodeType: 1,\n      childNodes: [],\n      attributes: [{\n        nodeName: 'type',\n        value: 'luminanceToAlpha'\n      }, {\n        nodeName: 'includeOpacity',\n        value: 'true'\n      }]\n    }).apply(maskCtx, 0, 0, x + width, y + height);\n    var tmpCanvas = document.createCanvas(x + width, y + height);\n    var tmpCtx = tmpCanvas.getContext('2d');\n    document.screen.setDefaults(tmpCtx);\n    element.render(tmpCtx);\n    tmpCtx.globalCompositeOperation = 'destination-in';\n    tmpCtx.fillStyle = maskCtx.createPattern(maskCanvas, 'no-repeat');\n    tmpCtx.fillRect(0, 0, x + width, y + height);\n    ctx.fillStyle = tmpCtx.createPattern(tmpCanvas, 'no-repeat');\n    ctx.fillRect(0, 0, x + width, y + height); // reassign mask\n\n    this.restoreStyles(element, ignoredStyles);\n  }\n\n  render(_) {// NO RENDER\n  }\n\n}\nMaskElement.ignoreStyles = ['mask', 'transform', 'clip-path'];\n\nvar noop = () => {// NOOP\n};\n\nclass ClipPathElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'clipPath';\n  }\n\n  apply(ctx) {\n    var {\n      document\n    } = this;\n    var contextProto = Reflect.getPrototypeOf(ctx);\n    var {\n      beginPath,\n      closePath\n    } = ctx;\n\n    if (contextProto) {\n      contextProto.beginPath = noop;\n      contextProto.closePath = noop;\n    }\n\n    Reflect.apply(beginPath, ctx, []);\n    this.children.forEach(child => {\n      if (typeof child.path === 'undefined') {\n        return;\n      }\n\n      var transform = typeof child.elementTransform !== 'undefined' ? child.elementTransform() : null; // handle <use />\n\n      if (!transform) {\n        transform = Transform.fromElement(document, child);\n      }\n\n      if (transform) {\n        transform.apply(ctx);\n      }\n\n      child.path(ctx);\n\n      if (contextProto) {\n        contextProto.closePath = closePath;\n      }\n\n      if (transform) {\n        transform.unapply(ctx);\n      }\n    });\n    Reflect.apply(closePath, ctx, []);\n    ctx.clip();\n\n    if (contextProto) {\n      contextProto.beginPath = beginPath;\n      contextProto.closePath = closePath;\n    }\n  }\n\n  render(_) {// NO RENDER\n  }\n\n}\n\nclass FilterElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'filter';\n  }\n\n  apply(ctx, element) {\n    // render as temp svg\n    var {\n      document,\n      children\n    } = this;\n    var boundingBox = element.getBoundingBox(ctx);\n\n    if (!boundingBox) {\n      return;\n    }\n\n    var px = 0;\n    var py = 0;\n    children.forEach(child => {\n      var efd = child.extraFilterDistance || 0;\n      px = Math.max(px, efd);\n      py = Math.max(py, efd);\n    });\n    var width = Math.floor(boundingBox.width);\n    var height = Math.floor(boundingBox.height);\n    var tmpCanvasWidth = width + 2 * px;\n    var tmpCanvasHeight = height + 2 * py;\n\n    if (tmpCanvasWidth < 1 || tmpCanvasHeight < 1) {\n      return;\n    }\n\n    var x = Math.floor(boundingBox.x);\n    var y = Math.floor(boundingBox.y);\n    var ignoredStyles = this.removeStyles(element, FilterElement.ignoreStyles);\n    var tmpCanvas = document.createCanvas(tmpCanvasWidth, tmpCanvasHeight);\n    var tmpCtx = tmpCanvas.getContext('2d');\n    document.screen.setDefaults(tmpCtx);\n    tmpCtx.translate(-x + px, -y + py);\n    element.render(tmpCtx); // apply filters\n\n    children.forEach(child => {\n      if (typeof child.apply === 'function') {\n        child.apply(tmpCtx, 0, 0, tmpCanvasWidth, tmpCanvasHeight);\n      }\n    }); // render on me\n\n    ctx.drawImage(tmpCanvas, 0, 0, tmpCanvasWidth, tmpCanvasHeight, x - px, y - py, tmpCanvasWidth, tmpCanvasHeight);\n    this.restoreStyles(element, ignoredStyles);\n  }\n\n  render(_) {// NO RENDER\n  }\n\n}\nFilterElement.ignoreStyles = ['filter', 'transform', 'clip-path'];\n\nclass FeDropShadowElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'feDropShadow';\n    this.addStylesFromStyleDefinition();\n  }\n\n  apply(_, _x, _y, _width, _height) {// TODO: implement\n  }\n\n}\n\nclass FeMorphologyElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'feMorphology';\n  }\n\n  apply(_, _x, _y, _width, _height) {// TODO: implement\n  }\n\n}\n\nclass FeCompositeElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'feComposite';\n  }\n\n  apply(_, _x, _y, _width, _height) {// TODO: implement\n  }\n\n}\n\nclass FeGaussianBlurElement extends Element {\n  constructor(document, node, captureTextNodes) {\n    super(document, node, captureTextNodes);\n    this.type = 'feGaussianBlur';\n    this.blurRadius = Math.floor(this.getAttribute('stdDeviation').getNumber());\n    this.extraFilterDistance = this.blurRadius;\n  }\n\n  apply(ctx, x, y, width, height) {\n    var {\n      document,\n      blurRadius\n    } = this;\n    var body = document.window ? document.window.document.body : null;\n    var canvas = ctx.canvas; // StackBlur requires canvas be on document\n\n    canvas.id = document.getUniqueId();\n\n    if (body) {\n      canvas.style.display = 'none';\n      body.appendChild(canvas);\n    }\n\n    canvasRGBA(canvas, x, y, width, height, blurRadius);\n\n    if (body) {\n      body.removeChild(canvas);\n    }\n  }\n\n}\n\nclass TitleElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'title';\n  }\n\n}\n\nclass DescElement extends Element {\n  constructor() {\n    super(...arguments);\n    this.type = 'desc';\n  }\n\n}\n\nvar elements = {\n  'svg': SVGElement,\n  'rect': RectElement,\n  'circle': CircleElement,\n  'ellipse': EllipseElement,\n  'line': LineElement,\n  'polyline': PolylineElement,\n  'polygon': PolygonElement,\n  'path': PathElement,\n  'pattern': PatternElement,\n  'marker': MarkerElement,\n  'defs': DefsElement,\n  'linearGradient': LinearGradientElement,\n  'radialGradient': RadialGradientElement,\n  'stop': StopElement,\n  'animate': AnimateElement,\n  'animateColor': AnimateColorElement,\n  'animateTransform': AnimateTransformElement,\n  'font': FontElement,\n  'font-face': FontFaceElement,\n  'missing-glyph': MissingGlyphElement,\n  'glyph': GlyphElement,\n  'text': TextElement,\n  'tspan': TSpanElement,\n  'tref': TRefElement,\n  'a': AElement,\n  'textPath': TextPathElement,\n  'image': ImageElement,\n  'g': GElement,\n  'symbol': SymbolElement,\n  'style': StyleElement,\n  'use': UseElement,\n  'mask': MaskElement,\n  'clipPath': ClipPathElement,\n  'filter': FilterElement,\n  'feDropShadow': FeDropShadowElement,\n  'feMorphology': FeMorphologyElement,\n  'feComposite': FeCompositeElement,\n  'feColorMatrix': FeColorMatrixElement,\n  'feGaussianBlur': FeGaussianBlurElement,\n  'title': TitleElement,\n  'desc': DescElement\n};\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$1(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction createCanvas(width, height) {\n  var canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  return canvas;\n}\n\nfunction createImage(_x) {\n  return _createImage.apply(this, arguments);\n}\n\nfunction _createImage() {\n  _createImage = _asyncToGenerator(function* (src) {\n    var anonymousCrossOrigin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var image = document.createElement('img');\n\n    if (anonymousCrossOrigin) {\n      image.crossOrigin = 'Anonymous';\n    }\n\n    return new Promise((resolve, reject) => {\n      image.onload = () => {\n        resolve(image);\n      };\n\n      image.onerror = (_event, _source, _lineno, _colno, error) => {\n        reject(error);\n      };\n\n      image.src = src;\n    });\n  });\n  return _createImage.apply(this, arguments);\n}\n\nclass Document {\n  constructor(canvg) {\n    var {\n      rootEmSize = 12,\n      emSize = 12,\n      createCanvas = Document.createCanvas,\n      createImage = Document.createImage,\n      anonymousCrossOrigin\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.canvg = canvg;\n    this.definitions = {};\n    this.styles = {};\n    this.stylesSpecificity = {};\n    this.images = [];\n    this.fonts = [];\n    this.emSizeStack = [];\n    this.uniqueId = 0;\n    this.screen = canvg.screen;\n    this.rootEmSize = rootEmSize;\n    this.emSize = emSize;\n    this.createCanvas = createCanvas;\n    this.createImage = this.bindCreateImage(createImage, anonymousCrossOrigin);\n    this.screen.wait(this.isImagesLoaded.bind(this));\n    this.screen.wait(this.isFontsLoaded.bind(this));\n  }\n\n  bindCreateImage(createImage, anonymousCrossOrigin) {\n    if (typeof anonymousCrossOrigin === 'boolean') {\n      return (source, forceAnonymousCrossOrigin) => createImage(source, typeof forceAnonymousCrossOrigin === 'boolean' ? forceAnonymousCrossOrigin : anonymousCrossOrigin);\n    }\n\n    return createImage;\n  }\n\n  get window() {\n    return this.screen.window;\n  }\n\n  get fetch() {\n    return this.screen.fetch;\n  }\n\n  get ctx() {\n    return this.screen.ctx;\n  }\n\n  get emSize() {\n    var {\n      emSizeStack\n    } = this;\n    return emSizeStack[emSizeStack.length - 1];\n  }\n\n  set emSize(value) {\n    var {\n      emSizeStack\n    } = this;\n    emSizeStack.push(value);\n  }\n\n  popEmSize() {\n    var {\n      emSizeStack\n    } = this;\n    emSizeStack.pop();\n  }\n\n  getUniqueId() {\n    return \"canvg\".concat(++this.uniqueId);\n  }\n\n  isImagesLoaded() {\n    return this.images.every(_ => _.loaded);\n  }\n\n  isFontsLoaded() {\n    return this.fonts.every(_ => _.loaded);\n  }\n\n  createDocumentElement(document) {\n    var documentElement = this.createElement(document.documentElement);\n    documentElement.root = true;\n    documentElement.addStylesFromStyleDefinition();\n    this.documentElement = documentElement;\n    return documentElement;\n  }\n\n  createElement(node) {\n    var elementType = node.nodeName.replace(/^[^:]+:/, '');\n    var ElementType = Document.elementTypes[elementType];\n\n    if (typeof ElementType !== 'undefined') {\n      return new ElementType(this, node);\n    }\n\n    return new UnknownElement(this, node);\n  }\n\n  createTextNode(node) {\n    return new TextNode(this, node);\n  }\n\n  setViewBox(config) {\n    this.screen.setViewBox(_objectSpread$1({\n      document: this\n    }, config));\n  }\n\n}\nDocument.createCanvas = createCanvas;\nDocument.createImage = createImage;\nDocument.elementTypes = elements;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n/**\r\n * SVG renderer on canvas.\r\n */\n\nclass Canvg {\n  /**\r\n   * Main constructor.\r\n   * @param ctx - Rendering context.\r\n   * @param svg - SVG Document.\r\n   * @param options - Rendering options.\r\n   */\n  constructor(ctx, svg) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    this.parser = new Parser(options);\n    this.screen = new Screen(ctx, options);\n    this.options = options;\n    var document = new Document(this, options);\n    var documentElement = document.createDocumentElement(svg);\n    this.document = document;\n    this.documentElement = documentElement;\n  }\n  /**\r\n   * Create Canvg instance from SVG source string or URL.\r\n   * @param ctx - Rendering context.\r\n   * @param svg - SVG source string or URL.\r\n   * @param options - Rendering options.\r\n   * @returns Canvg instance.\r\n   */\n\n\n  static from(ctx, svg) {\n    var _arguments = arguments;\n    return _asyncToGenerator(function* () {\n      var options = _arguments.length > 2 && _arguments[2] !== undefined ? _arguments[2] : {};\n      var parser = new Parser(options);\n      var svgDocument = yield parser.parse(svg);\n      return new Canvg(ctx, svgDocument, options);\n    })();\n  }\n  /**\r\n   * Create Canvg instance from SVG source string.\r\n   * @param ctx - Rendering context.\r\n   * @param svg - SVG source string.\r\n   * @param options - Rendering options.\r\n   * @returns Canvg instance.\r\n   */\n\n\n  static fromString(ctx, svg) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var parser = new Parser(options);\n    var svgDocument = parser.parseFromString(svg);\n    return new Canvg(ctx, svgDocument, options);\n  }\n  /**\r\n   * Create new Canvg instance with inherited options.\r\n   * @param ctx - Rendering context.\r\n   * @param svg - SVG source string or URL.\r\n   * @param options - Rendering options.\r\n   * @returns Canvg instance.\r\n   */\n\n\n  fork(ctx, svg) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return Canvg.from(ctx, svg, _objectSpread(_objectSpread({}, this.options), options));\n  }\n  /**\r\n   * Create new Canvg instance with inherited options.\r\n   * @param ctx - Rendering context.\r\n   * @param svg - SVG source string.\r\n   * @param options - Rendering options.\r\n   * @returns Canvg instance.\r\n   */\n\n\n  forkString(ctx, svg) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return Canvg.fromString(ctx, svg, _objectSpread(_objectSpread({}, this.options), options));\n  }\n  /**\r\n   * Document is ready promise.\r\n   * @returns Ready promise.\r\n   */\n\n\n  ready() {\n    return this.screen.ready();\n  }\n  /**\r\n   * Document is ready value.\r\n   * @returns Is ready or not.\r\n   */\n\n\n  isReady() {\n    return this.screen.isReady();\n  }\n  /**\r\n   * Render only first frame, ignoring animations and mouse.\r\n   * @param options - Rendering options.\r\n   */\n\n\n  render() {\n    var _arguments2 = arguments,\n        _this = this;\n\n    return _asyncToGenerator(function* () {\n      var options = _arguments2.length > 0 && _arguments2[0] !== undefined ? _arguments2[0] : {};\n\n      _this.start(_objectSpread({\n        enableRedraw: true,\n        ignoreAnimation: true,\n        ignoreMouse: true\n      }, options));\n\n      yield _this.ready();\n\n      _this.stop();\n    })();\n  }\n  /**\r\n   * Start rendering.\r\n   * @param options - Render options.\r\n   */\n\n\n  start() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var {\n      documentElement,\n      screen,\n      options: baseOptions\n    } = this;\n    screen.start(documentElement, _objectSpread(_objectSpread({\n      enableRedraw: true\n    }, baseOptions), options));\n  }\n  /**\r\n   * Stop rendering.\r\n   */\n\n\n  stop() {\n    this.screen.stop();\n  }\n  /**\r\n   * Resize SVG to fit in given size.\r\n   * @param width\r\n   * @param height\r\n   * @param preserveAspectRatio\r\n   */\n\n\n  resize(width) {\n    var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : width;\n    var preserveAspectRatio = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    this.documentElement.resize(width, height, preserveAspectRatio);\n  }\n\n}\n\nexport { AElement, AnimateColorElement, AnimateElement, AnimateTransformElement, BoundingBox, CB1, CB2, CB3, CB4, Canvg, CircleElement, ClipPathElement, DefsElement, DescElement, Document, Element, EllipseElement, FeColorMatrixElement, FeCompositeElement, FeDropShadowElement, FeGaussianBlurElement, FeMorphologyElement, FilterElement, Font, FontElement, FontFaceElement, GElement, GlyphElement, GradientElement, ImageElement, LineElement, LinearGradientElement, MarkerElement, MaskElement, Matrix, MissingGlyphElement, Mouse, PSEUDO_ZERO, Parser, PathElement, PathParser, PatternElement, Point, PolygonElement, PolylineElement, Property, QB1, QB2, QB3, RadialGradientElement, RectElement, RenderedElement, Rotate, SVGElement, SVGFontLoader, Scale, Screen, Skew, SkewX, SkewY, StopElement, StyleElement, SymbolElement, TRefElement, TSpanElement, TextElement, TextPathElement, TitleElement, Transform, Translate, UnknownElement, UseElement, ViewPort, compressSpaces, Canvg as default, getSelectorSpecificity, normalizeAttributeName, normalizeColor, parseExternalUrl, index as presets, toNumbers, trimLeft, trimRight, vectorMagnitude, vectorsAngle, vectorsRatio };\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguZXMuanMiLCJzb3VyY2VzIjpbXSwic291cmNlc0NvbnRlbnQiOltdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsifQ==\n"],"names":["offscreen","DOMParserFallback","preset","width","height","url","_asyncToGenerator","response","blob","img","node","_ref","DOMParser","canvas","fetch","index","compressSpaces","str","trimLeft","trimRight","toNumbers","matches","allUppercase","normalizeAttributeName","name","parseExternalUrl","urlMatch","normalizeColor","color","rgbParts","normalizedColor","num","isFloat","attributeRegex","idRegex","classRegex","pseudoElementRegex","pseudoClassWithBracketsRegex","pseudoClassRegex","elementRegex","findSelectorMatch","selector","regex","getSelectorSpecificity","specificity","currentSelector","delta","PSEUDO_ZERO","vectorMagnitude","v","vectorsRatio","u","vectorsAngle","CB1","t","CB2","CB3","CB4","QB1","QB2","QB3","Property","document","value","separator","zeroIsValue","regexp","result","asString","def","n","axisOrIsFontSize","processPercent","axis","isFontSize","viewPort","element","opacity","patternTransform","len","commas","i","RGBColor","ViewPort","viewPorts","d","Point","x","y","point","defaultValue","scale","path","points","pathPoints","transform","xp","yp","Mouse","screen","onClick","onMouseMove","events","eventElements","style","run","ctx","_ref2","boundingBox","_ref3","window","event","eventTarget","defaultWindow","defaultFetch$1","Screen","checker","isReadyLock","_","aspectRatio","desiredWidth","desiredHeight","minX","minY","refX","refY","clip","clipX","clipY","cleanAspectRatio","aspectRatioAlign","aspectRatioMeetOrSlice","align","meetOrSlice","scaleX","scaleY","scaleMin","scaleMax","finalDesiredWidth","finalDesiredHeight","refXProp","refYProp","hasRefs","scaledClipX","scaledClipY","isMeetMinY","isSliceMaxY","isMeetMinX","isSliceMaxX","enableRedraw","ignoreMouse","ignoreAnimation","ignoreDimensions","ignoreClear","forceRedraw","scaleWidth","scaleHeight","offsetX","offsetY","FRAMERATE","mouse","frameDuration","resolve","now","then","tick","requestAnimationFrame","shouldUpdate","animation","CLIENT_WIDTH","CLIENT_HEIGHT","isFirstRender","widthStyle","heightStyle","cWidth","cHeight","viewBox","xRatio","yRatio","_widthStyle","_heightStyle","transformStyle","defaultFetch","DefaultDOMParser","Parser","resource","_this","xml","parser","parserError","_this2","Translate","Rotate","rotate","transformOrigin","numbers","cx","cy","originX","originY","angle","tx","ty","rad","Scale","scaleSize","Matrix","matrix","b","c","e","f","h","det","Skew","skew","SkewX","SkewY","parseTransforms","parseTransform","type","Transform","data","TransformType","transformOriginXProperty","transformOriginYProperty","transforms","Element","captureTextNodes","attribute","nodeName","styles","definitions","id","childNode","textNode","createIfNotExists","attr","_attr","key","skipAncestors","parent","parentStyle","_style","mask","filter","clipPathStyleProp","child","_node$getAttribute","styleClasses","styleClass","stylesSpecificity","existingSpecificity","ignoreStyles","toRestore","styleProp","_this$parent","UnknownElement","wrapFontFamily","fontFamily","trimmed","prepareFontFamily","prepareFontStyle","fontStyle","targetFontStyle","prepareFontWeight","fontWeight","targetFontWeight","Font","fontVariant","fontSize","inherit","inheritFont","font","parts","set","part","BoundingBox","x1","y1","x2","y2","p0","p1","p2","p3","forX","a","b2ac","t1","t2","p0x","p0y","p1x","p1y","p2x","p2y","p3x","p3y","cp1x","cp1y","cp2x","cp2y","PathParser","SVGPathData","commands","command","xProp","yProp","previousCommand","ox","oy","from","priorTo","angles","j","RenderedElement","opacityStyle","fromMeasure","fillStyleProp","fillOpacityStyleProp","strokeStyleProp","strokeOpacityProp","fillStyle","_fillStyle","_fillStyle2","strokeStyle","_strokeStyle","_strokeStyle2","strokeWidthStyleProp","newLineWidth","strokeLinecapStyleProp","strokeLinejoinStyleProp","strokeMiterlimitProp","strokeDasharrayStyleProp","strokeDashoffsetProp","gaps","offset","fontStyleProp","fontStyleStyleProp","fontVariantStyleProp","fontWeightStyleProp","fontSizeStyleProp","fontFamilyStyleProp","PathElement","pathParser","markers","fillRuleStyleProp","markersLastIndex","markerStartStyleProp","markerMidStyleProp","markerEndStyleProp","marker","_marker","_point","_angle","_marker2","_point2","_angle2","current","controlPoint","currentPoint","rX","rY","xRot","lArcFlag","sweepFlag","xAxisRotation","currp","l","s","cpp","centp","a1","ad","dir","ah","halfWay","r","sx","sy","GlyphElement","TextElement","textBaseline","childBoundingBox","inheritFontSize","text","char","glyph","prevChar","nextChar","arabicForm","maybeGlyph","childNodes","lastIndex","renderText","customFont","unitsPerEm","ctxFont","dx","lw","firstElement","textAnchor","isRTL","shift","textParent","xAttr","yAttr","dxAttr","dyAttr","measureCache","measure","targetText","_measure","parentAttr","TSpanElement","TextNode","SVGElement","_this$node$parentNode","fontSizeProp","refXAttr","refYAttr","viewBoxAttr","preserveAspectRatio","widthAttr","heightAttr","styleAttr","originWidth","originHeight","preserveAspectRatioAttr","RectElement","rxAttr","ryAttr","rx","ry","KAPPA","CircleElement","EllipseElement","LineElement","x0","y0","PolylineElement","PolygonElement","PatternElement","parentOpacityProp","patternSvg","patternCanvas","patternCtx","pattern","MarkerElement","orient","markerUnits","markerSvg","DefsElement","GElement","GradientElement","stops","children","stopsContainer","gradient","stop","MAX_VIRTUAL_PIXELS","rootView","rect","group","attributeToInherit","colorProp","LinearGradientElement","isBoundingBoxUnits","RadialGradientElement","fx","fy","fr","StopElement","stopOpacity","stopColor","AnimateElement","valuesAttr","attributeType","attributeName","initialUnits","progress","to","newValue","prop","fill","updated","typeAttr","values","p","lb","ub","AnimateColorElement","colorFrom","colorTo","g","AnimateTransformElement","transformFrom","transformTo","FontElement","fontFamilyStyle","FontFaceElement","MissingGlyphElement","TRefElement","firstChild","AElement","hasText","ownKeys$2","object","enumerableOnly","keys","symbols","sym","_objectSpread$2","target","source","_defineProperty","TextPathElement","pathElement","dataArray","theta","dTheta","psi","fs","textDecoration","glyphInfo","rotation","partialText","idx","anchor","textFullWidth","fullPathWidth","spacesNumber","inputOffset","dy","charI","glyphWidth","splineStep","segment","dyX","dyY","measuresCache","chars","thisSpacing","parentSpacing","letterSpacing","letterSpacingCache","textLen","dxSum","acc","cur","textWidth","startOffset","nextOffset","pathCommands","startX","startY","nextCommandType","commandType","start","end","inc","dist","fromX","fromY","m","rise","pt","ix","iy","pRise","pRun","distance","fullLen","cumulativePathLength","currentT","length","pct","p4x","p4y","cosPsi","sinPsi","inputStep","inputPrecision","precision","step","targetDistance","dataUriRegex","ImageElement","href","isSvg","image","err","match","svg","loaded","subDocument","_image","SymbolElement","SVGFontLoader","svgDocument","fonts","fontNode","StyleElement","css","cssDefs","cssParts","cssClasses","cssProps","cssClass","props","cssProp","srcs","src","UseElement","tempSvg","oldParent","imGet","_height","rgba","imSet","val","mi","m1","m2","m3","FeColorMatrixElement","_x","_y","includeOpacity","srcData","nr","ng","nb","na","MaskElement","ignoredStyles","maskCanvas","maskCtx","tmpCanvas","tmpCtx","noop","ClipPathElement","contextProto","beginPath","closePath","FilterElement","px","py","efd","tmpCanvasWidth","tmpCanvasHeight","FeDropShadowElement","_width","FeMorphologyElement","FeCompositeElement","FeGaussianBlurElement","blurRadius","body","canvasRGBA","TitleElement","DescElement","elements","ownKeys$1","_objectSpread$1","createCanvas","createImage","_createImage","anonymousCrossOrigin","reject","_event","_source","_lineno","_colno","error","Document","canvg","rootEmSize","emSize","forceAnonymousCrossOrigin","emSizeStack","documentElement","elementType","ElementType","config","ownKeys","_objectSpread","Canvg","options","_arguments","_arguments2","baseOptions"],"mappings":"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","x_google_ignoreList":[0]}